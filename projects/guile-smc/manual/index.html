<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual documents Guile-SMC version 0.6.2.

Copyright (C) 2021 Artyom V. Poptsov poptsov.artyom@gmail.com

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."
 -->
<!-- Created on August 15, 2023 by texi2html 5.0
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Guile State Machine Compiler (Guile-SMC) Reference Manual</title>

<meta name="description" content="Guile State Machine Compiler (Guile-SMC) Reference Manual">
<meta name="keywords" content="Guile State Machine Compiler (Guile-SMC) Reference Manual">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 5.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:pre}
span.nolinebreak {white-space:pre}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<h1>Guile State Machine Compiler Reference Manual</h1>
<h3 align="right">For Guile-SMC 0.6.2</h3>

<strong>Artyom V. Poptsov</strong><br>


<p>This manual documents Guile-SMC version 0.6.2.
</p>
<p>Copyright (C) 2021 Artyom V. Poptsov <a href="mailto:poptsov.artyom@gmail.com">poptsov.artyom@gmail.com</a>
</p>
<p>Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled &ldquo;GNU Free
Documentation License.&rdquo;
</p><hr>
<a name="Top"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[ &lt; ]</td>
<td valign="middle" align="left">[<a href="#Introduction" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-Guile_002dSMC-Reference-Manual"></a>
<h1 class="top">The Guile-SMC Reference Manual</h1>

<p>This manual documents Guile-SMC version 0.6.2.
</p>
<p>Copyright (C) 2021 Artyom V. Poptsov <a href="mailto:poptsov.artyom@gmail.com">poptsov.artyom@gmail.com</a>
</p>
<p>Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled &ldquo;GNU Free
Documentation License.&rdquo;
</p><br>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Introduction">1 Introduction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Installation">2 Installation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#API-Reference">3 API Reference</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Command_002dLine-Interface">4 Command-Line Interface</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Appendices

</pre></th></tr><tr><td align="left" valign="top"><a href="#GNU-Free-Documentation-License">Appendix A GNU Free Documentation License</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  The license of this manual.
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Indices

</pre></th></tr><tr><td align="left" valign="top"><a href="#Type-Index">Type Index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Procedure-Index">Procedure Index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Concept-Index">Concept Index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
</pre></th></tr></table>


<hr size="6">
<a name="Introduction"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Installation" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Installation" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Introduction-1"></a>
<h1 class="chapter">1 Introduction</h1>


<p>Guile-SMC is a state machine compiler for
<a href="https://www.gnu.org/software/guile/">GNU Guile</a>.
</p>

<hr>
<a name="Installation"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Introduction" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#API-Reference" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-Reference" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Installation-1"></a>
<h1 class="chapter">2 Installation</h1>


<p>Guile-SMC sources are available from GitHub at
<a href="https://github.com/artyom-poptsov/guile-smc/">https://github.com/artyom-poptsov/guile-smc/</a>. This section describes
requirements of Guile-SMC and installation process.
</p>
<p>Guile-SMC depends on the following packages:
</p>
<ul>
<li> <a href="https://www.gnu.org/software/guile/">GNU Guile</a>, 2.2 or later
</li></ul>

<p>Get the sources of Guile-Deck from GitHub using Git (a good introduction to
Git is <a href="https://git-scm.com/book/en/v2">Pro Git</a> book, which is available
online):
</p>
<div class="example">
<pre class="example">$ git clone git@github.com:artyom-poptsov/guile-smc.git
</pre></div>

<p>Configure the sources:
</p>
<div class="example">
<pre class="example">$ cd guile-smc/
$ autoreconf -vif
$ ./configure
</pre></div>

<p>Build and install the library:
</p>
<div class="example">
<pre class="example">$ make
$ make install
</pre></div>

<p>For a basic explanation of the installation of the package, see the
&lsquo;<tt>INSTALL</tt>&rsquo; file.
</p>
<p><strong>important</strong> You probably want to call <code>configure</code> with
the &lsquo;<samp>--with-guilesitedir</samp>&rsquo; option so that this package is
installed in Guile&rsquo;s default path.  But, if you don&rsquo;t know where your
Guile site directory is, run <code>configure</code> without the option,
and it will give you a suggestion.
</p>

<hr>
<a name="API-Reference"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Installation" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Installation" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#FSM" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="API-Reference-1"></a>
<h1 class="chapter">3 API Reference</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#FSM">3.1 FSM</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Finite State Machines
</td></tr>
<tr><td align="left" valign="top"><a href="#PlantUML">3.2 PlantUML</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    PlantUML reader.
</td></tr>
<tr><td align="left" valign="top"><a href="#Compiler">3.3 Compiler</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    The state machine compiler.
</td></tr>
<tr><td align="left" valign="top"><a href="#Version">3.4 Version</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Guile-SMC version.
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Core:

</pre></th></tr><tr><td align="left" valign="top"><a href="#Log">3.5 Log</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Logging facilities.
</td></tr>
<tr><td align="left" valign="top"><a href="#State">3.6 State</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       A FSM state.
</td></tr>
<tr><td align="left" valign="top"><a href="#Transition">3.7 Transition</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  A FSM transition.
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Context:

</pre></th></tr><tr><td align="left" valign="top"><a href="#Context">3.8 Context</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     A generic FSM context.
</td></tr>
<tr><td align="left" valign="top"><a href="#Context-Memory">3.9 Context Memory</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Structures that provide memory for FSMs.
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
</pre></th></tr></table>


<hr>
<a name="FSM"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-Reference" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-Reference" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#The-main-class" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="FSM-1"></a>
<h2 class="section">3.1 FSM</h2>
<a name="index-FSM"></a>

<hr>
<a name="The-main-class"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#FSM" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#FSM" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Public-API-1" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.1.1 The main class</h3>

<dl>
<dt><a name="index-_003cfsm_003e"></a>Class: <strong>&lt;fsm&gt;</strong><em> [#:description=#f] [#:debug-mode?=#f] [#:transition-table='()] [#:event-source=(labmda (context) #t)] [#:current-state=#f]</em></dt>
<dd>
<p>The main class that describes a finite state machine.
</p>
<dl compact="compact">
<dt>#:current-state (state &lt;state&gt;)</dt>
<dd><p><strong>required</strong> Current FSM state.
</p>
</dd>
<dt>#:description (str &lt;string&gt;)</dt>
<dd><p>Optional custom human-readable description for the finite-state machine.
</p>
</dd>
<dt>#:debug-mode? (enabled? &lt;boolean&gt;)</dt>
<dd><p>Is the debug mode enabled?
</p>
</dd>
<dt>#:transition-table (table &lt;hash-table&gt;)</dt>
<dd><p>A transition table.
</p>
</dd>
<dt>#:event-source (proc &lt;procedure&gt;)</dt>
<dd><p>Global state machine event source.  The event source is a procedure that
accepts a context and returns a next event.
</p>
<p>The default value of this parameter is a procedure that always returns
<code>#t</code>.
</p>
</dd>
</dl>

</dd></dl>

<hr>
<a name="Public-API-1"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-main-class" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#FSM" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Executing-a-FSM" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.1.2 Public API</h3>

<dl>
<dt><a name="index-fsm_003f"></a>Scheme Procedure: <strong>fsm?</strong><em> (object &lt;top&gt;)</em></dt>
<dd><p>Check if an <var>object</var> is an instance of <code>&lt;fsm&gt;</code> class.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002ddescription"></a>Scheme Procedure: <strong>fsm-description</strong><em> (fsm &lt;fsm&gt;)</em></dt>
<dd><p>Get the <var>fsm</var> description.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002ddescription_002dset_0021"></a>Scheme Procedure: <strong>fsm-description-set!</strong><em> (fsm &lt;fsm&gt;) (description &lt;string&gt;)</em></dt>
<dd><p>Set the <var>fsm</var> description.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002ddebug_002dmode_003f"></a>Scheme Procedure: <strong>fsm-debug-mode?</strong><em> (fsm &lt;fsm&gt;)</em></dt>
<dd><p>Check if the debug mode is enabled for <var>fsm</var>.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002ddebug_002dmode_002dset_0021"></a>Scheme Procedure: <strong>fsm-debug-mode-set!</strong><em> (fsm &lt;fsm&gt;) (value &lt;boolean&gt;)</em></dt>
<dd><p>Set the debug mode state for <var>fsm</var>.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dtransition_002dtable"></a>Scheme Procedure: <strong>fsm-transition-table</strong><em> (fsm &lt;fsm&gt;)</em></dt>
<dd><p>Get the <var>fsm</var> transition table.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dtransition_002dtable_002dset_0021"></a>Scheme Procedure: <strong>fsm-transition-table-set!</strong><em> (fsm &lt;fsm&gt;) (table &lt;hash-table&gt;)</em></dt>
<dd><p>Set the <var>fsm</var> transition hash table.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002devent_002dsource"></a>Scheme Procedure: <strong>fsm-event-source</strong><em> (fsm &lt;fsm&gt;)</em></dt>
<dd><p>Get the <var>fsm</var> event source procedure.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002devent_002dsource_002dset_0021"></a>Scheme Procedure: <strong>fsm-event-source-set!</strong><em> (fsm &lt;fsm&gt;) (proc &lt;procedure&gt;)</em></dt>
<dd><p>Set the <var>fsm</var> event source procedure.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dcurrent_002dstate"></a>Scheme Procedure: <strong>fsm-current-state</strong><em> (fsm &lt;fsm&gt;)</em></dt>
<dd><p>Get the <var>fsm</var> current state.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dcurrent_002dstate_002dset_0021"></a>Scheme Procedure: <strong>fsm-current-state-set!</strong><em> (fsm &lt;fsm&gt;) (state &lt;state&gt;)</em></dt>
<dd><p>Set the <var>fsm</var> current state.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dstep_002dcounter"></a>Scheme Procedure: <strong>fsm-step-counter</strong><em> (fsm &lt;fsm&gt;)</em></dt>
<dd><p>Get the <var>fsm</var> step counter value.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dstep_002dcounter_002dset_0021"></a>Scheme Procedure: <strong>fsm-step-counter-set!</strong><em> (fsm &lt;fsm&gt;) (value &lt;number&gt;)</em></dt>
<dd><p>Set the <var>fsm</var> step counter value.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dtransition_002dcounter"></a>Scheme Procedure: <strong>fsm-transition-counter</strong><em> (fsm &lt;fsm&gt;)</em></dt>
<dd><p>Get the <var>fsm</var> transition counter value.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dtransition_002dcounter_002dset_0021"></a>Scheme Procedure: <strong>fsm-transition-counter-set!</strong><em> (fsm &lt;fsm&gt;) (value &lt;number&gt;)</em></dt>
<dd><p>Set the <var>fsm</var> transition counter value.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dparent_002dfsm"></a>Scheme Procedure: <strong>fsm-parent-fsm</strong><em> (fsm &lt;fsm&gt;)</em></dt>
<dd><p>Get the <var>fsm</var> parent FSM.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dparent_002dfsm_002dset_0021"></a>Scheme Procedure: <strong>fsm-parent-fsm-set!</strong><em> (fsm &lt;fsm&gt;) (value &lt;fsm&gt;)</em></dt>
<dd><p>Set the <var>fsm</var> parent FSM.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dparent_002dcontext"></a>Scheme Procedure: <strong>fsm-parent-context</strong><em> (fsm &lt;fsm&gt;)</em></dt>
<dd><p>Get the <var>fsm</var> parent FSM context.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dparent_002dcontext_002dset_0021"></a>Scheme Procedure: <strong>fsm-parent-context-set!</strong><em> (fsm &lt;fsm&gt;) (value &lt;top&gt;)</em></dt>
<dd><p>Set the <var>fsm</var> parent FSM context.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dstate_002dadd_0021"></a>Scheme Procedure: <strong>fsm-state-add!</strong><em> (fsm &lt;fsm&gt;) (state &lt;state&gt;)</em></dt>
<dd><p>Add a new <var>state</var> to the <var>fsm</var> state table.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dstate"></a>Scheme Procedure: <strong>fsm-state</strong><em> (fsm &lt;fsm&gt;) (name &lt;symbol&gt;)</em></dt>
<dd><p>Lookup a state by its <var>name</var> from the state table of <var>fsm</var>.
</p></dd></dl>

<dl>
<dt><a name="index-transition_002dlist_002d_003ehash_002dtable"></a>Scheme Procedure: <strong>transition-list-&gt;hash-table</strong><em> (fsm &lt;fsm&gt;) (transition-list &lt;list&gt;)</em></dt>
<dd><p>Convert a <var>transition-list</var> to a hash table.
</p></dd></dl>

<dl>
<dt><a name="index-hash_002dtable_002d_003etransition_002dlist"></a>Scheme Procedure: <strong>hash-table-&gt;transition-list</strong><em> table</em></dt>
<dd><p>Convert a hash <var>table</var> to a transition list of the following form:
</p>
<div class="example">
<pre class="example">lisp
   '(((name        . state1)
      (description . &quot;description&quot;)
      (transitions . ((guard-procedure      action-procedure      next-state)
                      (guard-procedure      action-procedure      next-state)
                      ...
                      (guard-procedure      action-procedure      next-state))))
     (state1 ...))
</pre></div>

<p>Return the transition list.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dtransition_002dadd_0021"></a>Scheme Procedure: <strong>fsm-transition-add!</strong><em> (self &lt;fsm&gt;) (state-name &lt;symbol&gt;) (tguard &lt;procedure&gt;) (action &lt;procedure&gt;) (next-state-name &lt;top&gt;)</em></dt>
<dd>
<p>Add a new transition to a state named <var>next-state-name</var>, guarded by a
<var>tguard</var> with the specified transition <var>action</var>.
</p>
<p><var>next-state-mame</var> must be a name of a state that is already present in the
FSM transition table, or <code>#f</code> (which means that the transition is final.)
</p>
</dd></dl>

<dl>
<dt><a name="index-fsm_002dstate_002ddescription_002dadd_0021"></a>Scheme Procedure: <strong>fsm-state-description-add!</strong><em> (self &lt;fsm&gt;) (state-name &lt;symbol&gt;) (description &lt;string&gt;)</em></dt>
<dd>
<p>Add a new <var>description</var> to a state <var>state-name</var>.
</p>
</dd></dl>

<hr>
<a name="Executing-a-FSM"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Public-API-1" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Public-API-1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Getting-information-about-an-FSM" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.1.2.1 Executing a FSM</h4>

<dl>
<dt><a name="index-fsm_002dstep_0021"></a>Scheme Procedure: <strong>fsm-step!</strong><em> (fsm &lt;fsm&gt;) event context</em></dt>
<dt><a name="index-fsm_002dstep_0021-1"></a>Scheme Procedure: <strong>fsm-step!</strong><em> (fsm &lt;fsm&gt;) context</em></dt>
<dd><p>Perform a single <var>fsm</var> step on the specified <var>event</var> and a
<var>context</var>.
</p>
<p>If <var>event</var> parameter is missing, then <var>fsm</var> will always use event
sources specific for each state during the execution.
</p>
<p>Returns two values: new state and new context.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002drun_0021"></a>Scheme Procedure: <strong>fsm-run!</strong><em> (fsm &lt;fsm&gt;) event-source context</em></dt>
<dt><a name="index-fsm_002drun_0021-1"></a>Scheme Procedure: <strong>fsm-run!</strong><em> (fsm &lt;fsm&gt;) context</em></dt>
<dd><p>Run an <var>fsm</var> with the given <var>context</var> return the new context.
</p>
<p><var>event-source</var> must be a procedure that accepts a <var>context</var> as a
single parameter.
</p>
<p>If <var>event-source</var> parameter is missing, then then <var>fsm</var> will always
use event sources specific for each state during the execution.
</p>
<p><var>context</var> can be any Scheme object.
</p>
<p>Return the <var>context</var> after <var>fsm</var> execution.
</p></dd></dl>

<hr>
<a name="Getting-information-about-an-FSM"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Executing-a-FSM" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Public-API-1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Logging" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.1.2.2 Getting information about an FSM</h4>

<dl>
<dt><a name="index-fsm_002dstate_002dcount"></a>Scheme Procedure: <strong>fsm-state-count</strong><em> (fsm &lt;fsm&gt;)</em></dt>
<dd><p> Calculate the number of states in a finite state machine <var>fsm</var>. Return
the number of states.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dtransition_002dcount"></a>Scheme Procedure: <strong>fsm-transition-count</strong><em> (self &lt;fsm&gt;)</em></dt>
<dd><p>Calculate the total transition count for a finite state machine <var>fsm</var>.
Return the number of transitions.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dincoming_002dtransition_002dcount"></a>Scheme Procedure: <strong>fsm-incoming-transition-count</strong><em> self state [#:include-recurrent-links?=#f]</em></dt>
<dd>
<p>Calculate the incoming transition count for a <var>state</var>. Optionally the
procedure can include recurrent links of a <var>state</var> to itself in the
calculation if <var>include-recurrent-links?</var> is set to <code>#t</code>.
</p>
</dd></dl>

<dl>
<dt><a name="index-fsm_002dstate_002dreachable_003f"></a>Scheme Procedure: <strong>fsm-state-reachable?</strong><em> (fsm &lt;fsm&gt;) (state &lt;state&gt;)</em></dt>
<dd><p>Check if a <var>state</var> is reachable in the finite state machine <var>fsm</var>.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dvalidate"></a>Scheme Procedure: <strong>fsm-validate</strong><em> (fsm &lt;fsm&gt;)</em></dt>
<dd><p>Validate the finite state machine <var>fsm</var> and return the list of errors. If
the list is empty then no errors were found.
</p></dd></dl>

<hr>
<a name="Logging"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Getting-information-about-an-FSM" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Public-API-1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#PlantUML" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.1.2.3 Logging</h4>
<a name="index-FSM-logging"></a>

<dl>
<dt><a name="index-fsm_002dlog_002dtransition"></a>Scheme Procedure: <strong>fsm-log-transition</strong><em> (from &lt;state&gt;) (to &lt;state&gt;)</em></dt>
<dt><a name="index-fsm_002dlog_002dtransition-1"></a>Scheme Procedure: <strong>fsm-log-transition</strong><em> (from &lt;state&gt;) (to &lt;symbol&gt;)</em></dt>
<dt><a name="index-fsm_002dlog_002dtransition-2"></a>Scheme Procedure: <strong>fsm-log-transition</strong><em> (from &lt;state&gt;) (to &lt;boolean&gt;)</em></dt>
<dd><p>Log state transitions.
</p></dd></dl>


<hr>
<a name="PlantUML"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Logging" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-Reference" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Public-API" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="PlantUML-1"></a>
<h2 class="section">3.2 PlantUML</h2>

<p>The <code>(smc puml)</code> module contains a parser implementation for
<a href="http://www.plantuml.com/">PlantUML</a> format.
</p>
<hr>
<a name="Public-API"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#PlantUML" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#PlantUML" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#The-PlantUML-context" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.2.1 Public API</h3>

<dl>
<dt><a name="index-puml_002d_003efsm"></a>Scheme Procedure: <strong>puml-&gt;fsm</strong><em> port [#:module=(current-module)] [#:keep-going?=#f] [#:debug-mode?=#f]</em></dt>
<dd>
<p>Read a FSM description from a <var>port</var> in the PlantUML format and convert it
to Guile-SMC <code>&lt;fsm&gt;</code> instance.
</p></dd></dl>

<dl>
<dt><a name="index-puml_002dstring_002d_003efsm"></a>Scheme Procedure: <strong>puml-string-&gt;fsm</strong><em> port [#:module=(current-module)] [#:keep-going?=#f] [#:debug-mode?=#f]</em></dt>
<dd>
<p>Convert a <var>string</var> in the PlantUML format and to Guile-SMC <code>&lt;fsm&gt;</code>
instance.
</p></dd></dl>

<hr>
<a name="The-PlantUML-context"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Public-API" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#PlantUML" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#FSM-Guards-and-Actions" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.2.2 The PlantUML context</h3>

<dl>
<dt><a name="index-_003cpuml_002dcontext_003e"></a>Class: <strong>&lt;puml-context&gt;</strong><em> #:module [#:keep-going?=#f]</em></dt>
<dd>
<dl compact="compact">
<dt>#:module</dt>
<dd><p>A module which contains state machine procedures.
</p>
</dd>
<dt>#:keep-going? (value &lt;boolean&gt;)</dt>
<dd><p>Whether the parser should keep going when a procedure cannot be resolved or
not.
</p>
<p>When set to #t, the parser remembers all unresolved procedures but keeps going
without issuing an error. All unresolved procedures are replaced with default
variants (<code>guard:t</code> for guards, <code>action:no-op</code> for actions.)
</p></dd>
</dl>

</dd></dl>

<dl>
<dt><a name="index-puml_002dcontext_002dfsm"></a>Scheme Procedure: <strong>puml-context-fsm</strong><em> (context &lt;puml-context&gt;)</em></dt>
<dd><p>Get the <var>context</var> output finite state machine.
</p></dd></dl>

<dl>
<dt><a name="index-puml_002dcontext_002dfsm_002dset_0021"></a>Scheme Procedure: <strong>puml-context-fsm-set!</strong><em> (context &lt;puml-context&gt;) (fsm &lt;fsm&gt;)</em></dt>
<dd><p>Set the <var>context</var> output finite state machine.
</p></dd></dl>

<dl>
<dt><a name="index-puml_002dcontext_002dmodule"></a>Scheme Procedure: <strong>puml-context-module</strong><em> (context &lt;puml-context&gt;)</em></dt>
<dd><p>Get the <var>context</var> module.
</p></dd></dl>

<dl>
<dt><a name="index-puml_002dcontext_002dkeep_002dgoing_003f"></a>Scheme Procedure: <strong>puml-context-keep-going?</strong><em> (context &lt;puml-context&gt;)</em></dt>
<dd><p>Check if &ldquo;keep going&rdquo; option is enabled for an PlantUML <var>context</var>.
</p></dd></dl>

<hr>
<a name="FSM-Guards-and-Actions"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-PlantUML-context" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-PlantUML-context" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Resolver-status" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.2.2.1 FSM Guards and Actions</h4>

<dl>
<dt><a name="index-title_003f"></a>Scheme Procedure: <strong>title?</strong><em> ctx ch</em></dt>
<dd><p>Check if PlantUML diagram title is found.
</p></dd></dl>

<dl>
<dt><a name="index-add_002ddescription"></a>Scheme Procedure: <strong>add-description</strong><em> ctx ch</em></dt>
<dd><p>Add FSM description.
</p></dd></dl>

<dl>
<dt><a name="index-add_002dstate_002dtransition"></a>Scheme Procedure: <strong>add-state-transition</strong><em> ctx ch</em></dt>
<dd><p>Add FSM state transition.
</p></dd></dl>

<dl>
<dt><a name="index-process_002dstate_002ddescription"></a>Scheme Procedure: <strong>process-state-description</strong><em> ctx ch</em></dt>
</dl>

<dl>
<dt><a name="index-validate_002dstart_002dtag"></a>Scheme Procedure: <strong>validate-start-tag</strong><em> ctx ch</em></dt>
<dt><a name="index-validate_002dend_002dtag"></a>Scheme Procedure: <strong>validate-end-tag</strong><em> ctx ch</em></dt>
<dd><p>Validate start/end tags in a PlantUML data.
</p></dd></dl>

<dl>
<dt><a name="index-throw_002dno_002dstart_002dtag_002derror"></a>Scheme Procedure: <strong>throw-no-start-tag-error</strong><em> ctx ch</em></dt>
<dt><a name="index-throw_002dunexpected_002dend_002dof_002dfile_002derror"></a>Scheme Procedure: <strong>throw-unexpected-end-of-file-error</strong><em> ctx ch</em></dt>
<dd><p>PlantUML parser context error reporting.
</p></dd></dl>

<hr>
<a name="Resolver-status"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#FSM-Guards-and-Actions" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-PlantUML-context" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Internal-procedures" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.2.2.2 Resolver status</h4>

<dl>
<dt><a name="index-puml_002dcontext_002dresolved_002dprocedures"></a>Scheme Procedure: <strong>puml-context-resolved-procedures</strong><em> (puml-context &lt;puml-context&gt;)</em></dt>
<dd>
<p>Return a <code>&lt;set&gt;</code> of resolved procedures. Each element of the set is a
pair, where <code>car</code> of the pair is a module from which a procedure is
resolved, and <code>cdr</code> is a resolved procedure.
</p></dd></dl>

<dl>
<dt><a name="index-puml_002dcontext_002dunresolved_002dprocedures"></a>Scheme Procedure: <strong>puml-context-unresolved-procedures</strong><em> (puml-context &lt;puml-context&gt;)</em></dt>
<dd>
<p>Return a <code>&lt;set&gt;</code> of unresolved procedures. Each element of the set an
unresolved procedure name.
</p></dd></dl>

<dl>
<dt><a name="index-puml_002dcontext_002dprint_002dresolver_002dstatus"></a>Scheme Procedure: <strong>puml-context-print-resolver-status</strong><em> (puml-context &lt;puml-context&gt;) (port &lt;port&gt;)</em></dt>
<dd>
<p>Pretty-print a <var>puml-context</var> resolver status to the specified <var>port</var>.
</p>
</dd></dl>

<hr>
<a name="Internal-procedures"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Resolver-status" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#PlantUML" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Compiler" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.2.3 Internal procedures</h3>

<dl>
<dt><a name="index-puml_002derror"></a>Scheme Procedure: <strong>puml-error</strong><em> ctx message</em></dt>
<dt><a name="index-puml_002derror-1"></a>Scheme Procedure: <strong>puml-error</strong><em> ctx message . args</em></dt>
<dd><p>Throw an PlantUML error.
</p></dd></dl>

<dl>
<dt><a name="index-resolve_002dprocedure"></a>Scheme Procedure: <strong>resolve-procedure</strong><em> context proc-name default</em></dt>
<dd><p>This procedure tries to resolve a procedure <var>proc-name</var> in the provided
modules of a <var>context</var>. When no procedure available with the given name,
returns <var>default</var> procedure.
</p></dd></dl>

<dl>
<dt><a name="index-module_002dname"></a>Scheme Procedure: <strong>module-name</strong><em> module</em></dt>
<dd><p>Get the name of a <var>module</var>.
</p></dd></dl>

<dl>
<dt><a name="index-parse_002devent_002dsource"></a>Scheme Procedure: <strong>parse-event-source</strong><em> (line &lt;string&gt;)</em></dt>
<dd><p>Try to parse a <var>line</var> as an event source definition.  Returns a match or
<var>#f</var> if line does not match.
</p>
<p>Example event source definition:
</p><div class="example">
<pre class="example">event-source: some-event-source
</pre></div>

</dd></dl>

<dl>
<dt><a name="index-parse_002dentry_002daction"></a>Scheme Procedure: <strong>parse-entry-action</strong><em> (line &lt;string&gt;)</em></dt>
<dd><p>Try to parse a <var>line</var> as an entry action definition.  Returns a match or
<var>#f</var> if line does not match.
</p>
<p>Example entry action definition:
</p><div class="example">
<pre class="example">entry-action: some-entry-action
</pre></div>

</dd></dl>

<dl>
<dt><a name="index-parse_002dexit_002daction"></a>Scheme Procedure: <strong>parse-exit-action</strong><em> (line &lt;string&gt;)</em></dt>
<dd><p>Try to parse a <var>line</var> as an exit action definition.  Returns a match or
<var>#f</var> if line does not match.
</p>
<p>Example exit action definition:
</p><div class="example">
<pre class="example">exit-action: some-exit-action
</pre></div>

</dd></dl>


<hr>
<a name="Compiler"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Internal-procedures" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-Reference" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Guile-Compiler-Code" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Compiler-1"></a>
<h2 class="section">3.3 Compiler</h2>
<a name="index-Compiler"></a>

<p>The Guile-SMC finite state machines generated from a PlantUML format can be
used for their purpose &ldquo;as is&rdquo;.  But it can be costly to read a PlantUML
<acronym title="Finite-State Machine">FSM</acronym> (Finite-State Machine) description each time a program run.
</p>
<p>To solve this problem Guile-SMC provides a compiler that can translate the
internal representation of a state machine into a Scheme code.
</p>
<p>The procedures below are defined in <code>(smc compiler)</code> module.
</p>
<dl>
<dt><a name="index-fsm_002dcompile"></a>Scheme Procedure: <strong>fsm-compile</strong><em> fsm [#:fsm-name='custom-fsm] [#:fsm-module=#f] [#:extra-modules='()] [#:target='guile] [#:output-port=(current-output-port)]</em></dt>
<dd>
<p>Compile a <var>fsm</var> into a Scheme module.
</p>
<p>Named parameters:
</p>
<dl compact="compact">
<dt>#:fsm-name (name &lt;symbol&gt;)</dt>
<dd><p>Set the name for the output finite state machine. Basically the name turns to
the FSM class (like <code>&lt;custom-fsm&gt;</code> for the default value.)
</p>
</dd>
<dt>#:fsm-module (module &lt;list&gt;)</dt>
<dt>#:fsm-module (module &lt;boolean&gt;)</dt>
<dd><p>The module to place the output FSM into. The value must be a list like
<code>(my-parser my-fsm)</code> or #f if the <code>define-module</code> part should be
omitted.
</p>
</dd>
<dt>#:extra-modules (modules-list &lt;list&gt;)</dt>
<dd><p>A list of extra modules that required to run the output FSM.  These modules are
added to to the output FSM module requirements.
</p>
</dd>
<dt>#:output-port (port &lt;port&gt;)</dt>
<dd><p>The port to write the output FSM to.
</p>
</dd>
<dt>#:target (value &lt;symbol&gt;)</dt>
<dd><p>The compilation target.  Allowed values are:
</p><dl compact="compact">
<dt>guile</dt>
<dd><p>This is the default mode.  The output FSM will depend on Guile-SMC and won&rsquo;t
work if it is not installed on a target system.
</p></dd>
<dt>guile-standalone</dt>
<dd><p>This target allows to create a single file FSM that does not depend on
Guile-SMC in any way.
</p>
<p>The compiler collects the required code from Guile-SMC and then removes all
unused parts from it, then the code is being printed to a <var>output-port</var>.
</p></dd>
</dl>

</dd>
</dl>

<p>Usage example:
</p>
<div class="lisp">
<pre class="lisp">(fsm-compile (puml-&gt;fsm (current-input-port)
                        #:module (puml-modules '((context))))
             #:fsm-name      'custom-fsm
             #:fsm-module    '(custom-fsm)
             #:extra-modules '((context)))
</pre></div>

</dd></dl>

<hr>
<a name="Common-Guile-Compiler-Code"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Compiler" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Compiler" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Guile" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.3.1 Common Guile Compiler Code</h3>
<p><code>(smc compiler guile-common)</code> module contains the common code for the
Guile FSM compiler.
</p>
<dl>
<dt><a name="index-form_002dfeed"></a>Scheme Procedure: <strong>form-feed</strong><em> port</em></dt>
<dd><p>Write a form feed symbol with the following newline to a <var>port</var>.
</p></dd></dl>

<dl>
<dt><a name="index-write_002dheader"></a>Scheme Procedure: <strong>write-header</strong><em> port</em></dt>
<dd><p>Write a header commentary to a <var>port</var>.
</p></dd></dl>

<dl>
<dt><a name="index-write_002dsection_002dheader"></a>Scheme Procedure: <strong>write-section-header</strong><em> description port</em></dt>
<dd><p>Write a section to a <var>port</var>.
</p></dd></dl>

<dl>
<dt><a name="index-write_002dfooter"></a>Scheme Procedure: <strong>write-footer</strong><em> file-name port</em></dt>
<dd><p>Write a file footer to a <var>port</var>.
</p></dd></dl>

<dl>
<dt><a name="index-write_002dparent_002dfsm_002dinfo"></a>Scheme Procedure: <strong>write-parent-fsm-info</strong><em> (fsm &lt;fsm&gt;) (port &lt;port&gt;)</em></dt>
<dd><p>Print the information about the parent FSM for a <var>fsm</var> to a <var>port</var>.
</p></dd></dl>

<hr>
<a name="Guile"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Guile-Compiler-Code" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Compiler" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Guile-Standalone" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.3.2 Guile</h3>
<p><code>(smc compiler guile)</code> module contains the code for &ldquo;guile&rdquo; compiler
target.
</p>
<dl>
<dt><a name="index-write_002dmodule"></a>Scheme Procedure: <strong>write-module</strong><em> module [#:extra-modules] [#:class-name] [#:port] [#:standalone-mode=#f]</em></dt>
<dd>
<p>Write a <code>define-module</code> part to a <var>port</var>.  <var>class-name</var> is used
to export a FSM class in the <code>#:export</code> part.  <var>extra-modules</var> allow
to specify a list of extra modules that required for the output FSM to work.
</p>
</dd></dl>

<dl>
<dt><a name="index-write_002duse_002dmodules"></a>Scheme Procedure: <strong>write-use-modules</strong><em> extra-modules port</em></dt>
<dd>
<p>Write <code>use-modules</code> section to the <var>port</var>.
</p>
</dd></dl>

<dl>
<dt><a name="index-write_002dtransition_002dtable"></a>Scheme Procedure: <strong>write-transition-table</strong><em> (fsm &lt;fsm&gt;) (port &lt;port&gt;)</em></dt>
<dd>
<p>Write a <var>fsm</var> transition table to a <var>port</var>.
</p>
</dd></dl>

<dl>
<dt><a name="index-write_002ddefine_002dclass"></a>Scheme Procedure: <strong>write-define-class</strong><em> class-name port</em></dt>
<dd>
<p>Write <code>define-class</code> for a <var>class-name</var> to a <var>port</var>.
</p>
</dd></dl>

<dl>
<dt><a name="index-write_002dinitialize"></a>Scheme Procedure: <strong>write-initialize</strong><em> fsm class-name port</em></dt>
<dd>
<p>Write the class constructor for <var>class-name</var> to the <var>port</var>.
</p>
</dd></dl>

<hr>
<a name="Guile-Standalone"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Guile" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Compiler" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Examples" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.3.3 Guile Standalone</h3>
<p><code>(smc compiler guile-standalone)</code> module contains the code for
&ldquo;guile-standalone&rdquo; target.
</p>
<dl>
<dt><a name="index-state_002d_003estandalone_002dcode"></a>Scheme Procedure: <strong>state-&gt;standalone-code</strong><em> (fsm &lt;fsm&gt;) (state &lt;list&gt;)</em></dt>
<dd><p>Convert a <var>state</var> to a plain Scheme <code>define</code> that does not depend on
Guile-SMC.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002dtransition_002dtable_002d_003estandalone_002dcode"></a>Scheme Procedure: <strong>fsm-transition-table-&gt;standalone-code</strong><em> (fsm &lt;fsm&gt;)</em></dt>
<dd><p>Convert a <var>fsm</var> transition table to a list of Scheme procedures that do
not depend on Guile-SMC.
</p></dd></dl>

<dl>
<dt><a name="index-string_002ddrop_002dboth"></a>Scheme Procedure: <strong>string-drop-both</strong><em> str</em></dt>
<dd><p>Drop one symbol from both left and right parts of a string <var>str</var>
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002ddefine_002dmodule"></a>Scheme Procedure: <strong>fsm-define-module</strong><em> fsm fsm-name module [#:extra-modules]</em></dt>
<dd>
<p>Generate a <code>define-module</code> code for an <var>fsm</var>.
</p>
</dd></dl>

<dl>
<dt><a name="index-tree_002dcontains_003f"></a>Scheme Procedure: <strong>tree-contains?</strong><em> root element</em></dt>
<dd><p>Check if a <var>root</var> contains an <var>element</var>.
</p></dd></dl>

<dl>
<dt><a name="index-prune_002dunused_002ddefinitions"></a>Scheme Procedure: <strong>prune-unused-definitions</strong><em> definitions hardwired-definitions</em></dt>
<dd>
<p>Remove all the definitions from the <var>definitions</var> list that are not used
neither in the <var>definitions</var> nor <var>hardwired-definitions</var> lists.
</p>
</dd></dl>

<dl>
<dt><a name="index-fsm_002dget_002dcontext_002dcode"></a>Scheme Procedure: <strong>fsm-get-context-code</strong><em> guile-smc-modules-path [#:type=#f] [#:skip-define-module?=#t]</em></dt>
<dd>
<p>Read the Guile-SCM context from the <var>guile-smc-modules-path</var> and return
the code as a list.
</p>
</dd></dl>

<dl>
<dt><a name="index-fsm_002dget_002dclass_002dcode"></a>Scheme Procedure: <strong>fsm-get-class-code</strong><em> fsm-name</em></dt>
<dd><p>Generate class code for an <var>fsm-name</var>.
</p></dd></dl>

<dl>
<dt><a name="index-fsm_002d_003estandalone_002dcode"></a>Scheme Procedure: <strong>fsm-&gt;standalone-code</strong><em> (fsm &lt;fsm&gt;) fsm-name</em></dt>
<dd><p>Convert an <var>fsm</var> to a procedure that does not depend on Guile-SMC.
</p></dd></dl>

<hr>
<a name="Examples"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Guile-Standalone" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Compiler" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Version" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.3.4 Examples</h3>

<p>For more examples, take a look into &lsquo;<tt>examples/compiler</tt>&rsquo; directory in the
project repository.
</p>

<hr>
<a name="Version"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Examples" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-Reference" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Log" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Version-1"></a>
<h2 class="section">3.4 Version</h2>

<p><code>(smc version)</code> contains procedures that allow to acquire information
about the Guile-SMC version in the <a href="https://semver.org/">Semantic Versioning format</a>.
</p>
<p>Guile-SMC version consists of three parts: MAJOR.MINOR.PATCH
</p>
<p>The procedures below allow to get any of the version part or the version as a
whole.
</p>
<a name="index-Versioning"></a>
<dl>
<dt><a name="index-smc_002dversion"></a>Scheme Procedure: <strong>smc-version</strong></dt>
<dd><p>Return the Guile-SMC version as a list of the following form:
</p><div class="example">
<pre class="example">lisp
'(MAJOR MINOR PATCH)
</pre></div>

</dd></dl>

<dl>
<dt><a name="index-smc_002dversion_002fstring"></a>Scheme Procedure: <strong>smc-version/string</strong></dt>
<dd><p>Get the raw Guile-SMC version as a string.
</p></dd></dl>

<dl>
<dt><a name="index-smc_002dversion_002fmajor"></a>Scheme Procedure: <strong>smc-version/major</strong></dt>
<dd><p>Get the &ldquo;MAJOR&rdquo; part of the Guile-SMC version.
</p></dd></dl>

<dl>
<dt><a name="index-smc_002dversion_002fminor"></a>Scheme Procedure: <strong>smc-version/minor</strong></dt>
<dd><p>Get the &ldquo;MINOR&rdquo; part of the Guile-SMC version.
</p></dd></dl>

<dl>
<dt><a name="index-smc_002dversion_002fpatch"></a>Scheme Procedure: <strong>smc-version/patch</strong></dt>
<dd><p>Get the &ldquo;PATCH&rdquo; part of the Guile-SMC version.
</p></dd></dl>


<hr>
<a name="Log"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Version" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-Reference" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#The-Precise-Logger" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Log-1"></a>
<h2 class="section">3.5 Log</h2>

<p><code>(smc core log)</code> module contains Guile-SMC logging facilities.
</p>
<hr>
<a name="The-Precise-Logger"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Log" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Log" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Log-Drivers" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.5.1 The Precise Logger</h3>

<dl>
<dt><a name="index-_003cprecise_002dlogger_003e"></a>Class: <strong>&lt;precise-logger&gt;</strong></dt>
<dd><p>Guile-SMC precise logger that prints log with microsecond accuracy.
</p></dd></dl>

<dl>
<dt><a name="index-precise_002dlogger_003f"></a>Scheme Procedure: <strong>precise-logger?</strong><em> x</em></dt>
<dd><p>Check if <var>x</var> is a <code>&lt;precise-logger&gt;</code> instance.
</p></dd></dl>

<hr>
<a name="Log-Drivers"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Precise-Logger" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Log" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-Log" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.5.2 Log Drivers</h3>

<p>Guile-SMC allows to set different log drivers (or handlers).  It uses
<code>&lt;system-log&gt;</code> by default.
</p>
<hr>
<a name="System-Log"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Log-Drivers" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Log-Drivers" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Precise-Port-Log" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.5.2.1 System Log</h4>
<dl>
<dt><a name="index-_003csystem_002dlog_003e"></a>Class: <strong>&lt;system-log&gt;</strong></dt>
<dd><p>This is a log handler which writes logs to the syslog.
</p></dd></dl>

<dl>
<dt><a name="index-system_002dlog_003f"></a>Scheme Procedure: <strong>system-log?</strong><em> x</em></dt>
<dd><p>Check if <var>x</var> is a <code>&lt;system-log&gt;</code> instance.
</p></dd></dl>

<hr>
<a name="Precise-Port-Log"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-Log" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Log-Drivers" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Error-Log" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.5.2.2 Precise Port Log</h4>

<dl>
<dt><a name="index-_003cprecise_002dport_002dlog_003e"></a>Class: <strong>&lt;precise-port-log&gt;</strong></dt>
<dd><p>Microsecond version of <code>&lt;port-log&gt;</code> from <code>(logging port-log)</code>.
</p></dd></dl>

<hr>
<a name="Standard-Error-Log"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Precise-Port-Log" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Log-Drivers" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Null-Log" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.5.2.3 Standard Error Log</h4>

<dl>
<dt><a name="index-_003cstderr_002dlog_003e"></a>Class: <strong>&lt;stderr-log&gt;</strong></dt>
<dd><p>Log driver that logs to the standard error port.
</p></dd></dl>

<hr>
<a name="Null-Log"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Error-Log" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Log-Drivers" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Logging-Initialization-and-Configuration" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.5.2.4 Null Log</h4>

<dl>
<dt><a name="index-_003cnull_002dlog_003e"></a>Class: <strong>&lt;null-log&gt;</strong></dt>
<dd><p>Log driver that logs to the standard error port.
</p></dd></dl>

<dl>
<dt><a name="index-null_002dlog_003f"></a>Scheme Procedure: <strong>null-log?</strong><em> x</em></dt>
<dd><p>Check if <var>x</var> is a <code>&lt;null-log&gt;</code> instance.
</p></dd></dl>

<hr>
<a name="Logging-Initialization-and-Configuration"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Null-Log" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Log" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Helper-Procedures" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.5.3 Logging Initialization and Configuration</h3>

<dl>
<dt><a name="index-smc_002dlog_002dinit_0021"></a>Scheme Procedure: <strong>smc-log-init!</strong><em> (log-driver &lt;string&gt;) (log-options &lt;list&gt;)</em></dt>
<dd><p>Initialize Guile-SMC logging to the specified <var>log-driver</var> with
<var>log-options</var> list.
</p>
<p>Known log drivers:
</p><ul>
<li> &ldquo;syslog&rdquo; (<code>&lt;system-log&gt;</code>)
</li><li> &ldquo;file&rdquo;   (<code>&lt;precise-port-log&gt;</code>)
</li><li> &ldquo;null&rdquo;   (<code>&lt;null-log&gt;</code>)
</li></ul>

<p>Return value is undefined.
</p></dd></dl>

<dl>
<dt><a name="index-log_002duse_002dstderr_0021"></a>Scheme Procedure: <strong>log-use-stderr!</strong><em> (value &lt;boolean&gt;)</em></dt>
<dd><p>Change whether the logger must print messages to the stderr as well as to
syslog, or not.
</p></dd></dl>

<hr>
<a name="Helper-Procedures"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Logging-Initialization-and-Configuration" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Log" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Logging-Procedures" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.5.4 Helper Procedures</h3>

<dl>
<dt><a name="index-_0025precise_002dlog_002dformatter"></a>Scheme Procedure: <strong>%precise-log-formatter</strong><em> lvl time str</em></dt>
<dd><p>The precise log formatter for <code>&lt;precise-logger&gt;</code>.
</p></dd></dl>

<hr>
<a name="Logging-Procedures"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Helper-Procedures" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Log" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#State" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.5.5 Logging Procedures</h3>

<dl>
<dt><a name="index-smc_002dlog"></a>Scheme Procedure: <strong>smc-log</strong><em> level fmt . args</em></dt>
<dt><a name="index-log_002derror"></a>Scheme Procedure: <strong>log-error</strong><em> fmt . args</em></dt>
<dt><a name="index-log_002dwarning"></a>Scheme Procedure: <strong>log-warning</strong><em> fmt . args</em></dt>
<dt><a name="index-log_002dinfo"></a>Scheme Procedure: <strong>log-info</strong><em> fmt . args</em></dt>
<dt><a name="index-log_002ddebug"></a>Scheme Procedure: <strong>log-debug</strong><em> fmt . args</em></dt>
<dd><p>Log a formatted message of a specified logging <var>level</var> to syslog.
</p></dd></dl>


<hr>
<a name="State"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Logging-Procedures" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-Reference" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Actions-1" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="State-1"></a>
<h2 class="section">3.6 State</h2>
<a name="index-State"></a>

<p>The <code>(smc core state)</code> module contains FSM state implementation.  The
<em>state</em> term is very important in the realm of finite-state machines as
the FSMs consist of states and transitions between them.
</p>
<p>A state can take one of two forms: it can be either a associative list or an
instance of <code>&lt;state&gt;</code> class.  There are converters between these forms.
</p>
<hr>
<a name="Actions-1"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#State" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#State" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Default-entry_002fexit-actions" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.6.1 Actions</h3>

<p>Basically an <em>action</em> is a procedure that is called when some event
happen.
</p>
<p>The main Guile-SMC allow to attach actions to transitions as well as to the
state entry/exit events.
</p>
<p>Note that a state does not run its entry/exit actions when <code>state-run</code>
method is called because it has insufficient information about when to call
entry/exit action procedures.  Those procedures are run by a FSM that owns the
state.
</p>
<hr>
<a name="Default-entry_002fexit-actions"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actions-1" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#State" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#The-main-class-1" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.6.2 Default entry/exit actions</h3>

<dl>
<dt><a name="index-_0025default_002dentry_002daction"></a>Scheme Procedure: <strong>%default-entry-action</strong><em> context</em></dt>
<dd><p>Default state entry action that just returns a <var>context</var>.
</p></dd></dl>

<dl>
<dt><a name="index-_0025default_002dexit_002daction"></a>Scheme Procedure: <strong>%default-exit-action</strong><em> context</em></dt>
<dd><p>Default state exit action that just returns a <var>context</var>.
</p></dd></dl>

<hr>
<a name="The-main-class-1"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Default-entry_002fexit-actions" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#State" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Public-API-2" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.6.3 The main class</h3>

<dl>
<dt><a name="index-_003cstate_003e"></a>Class: <strong>&lt;state&gt;</strong><em> #:name [#:description=#f] [#:event-source=#f] [#:entry-action=%default-entry-action] [#:exit-action=%default-exit-action] [#:transitions=#f]</em></dt>
<dd><p>This class describes an FSM state.
</p>
<p>Constructor parameters:
</p>
<dl compact="compact">
<dt>#:name (name &lt;string&gt;)</dt>
<dd><p><strong>required</strong> Name of this state.
</p>
</dd>
<dt>#:description (description &lt;string&gt;)</dt>
<dd><p>Description of this state.
</p>
</dd>
<dt>#:event-source (proc &lt;procedure&gt;)</dt>
<dd><p>A procedure that returns an event.
</p>
<p>It called by the FSM the state belongs to as follows:
</p><div class="example">
<pre class="example">lisp
(proc context)
</pre></div>

</dd>
<dt>#:entry-action (proc &lt;procedure&gt;)</dt>
<dd><p>A procedure that is called by the FSM the state belongs to when a transition
occurs to this state from another state, before running the transition table.
Note that the procedure is not called on self-transitions.
</p>
<p>The procedure MUST return a context, which is passed to the transition table
execution.
</p>
<p>The procedure called as follows:
</p><div class="example">
<pre class="example">lisp
(proc context)
</pre></div>

</dd>
<dt>#:exit-action (proc &lt;procedure&gt;)</dt>
<dd><p>A procedure that is called by the FSM the state belongs to when a transition
occurs from this state to another state, before running the transition table.
Note that the procedure is not called on self-transitions.
</p>
<p>The procedure MUST return a context.
</p>
<p>The procedure called as follows:
</p><div class="example">
<pre class="example">lisp
(proc context)
</pre></div>

</dd>
<dt>#:transitions (transitions &lt;list&gt;)</dt>
<dd><p>The transitions for this state.
</p>
</dd>
</dl>

</dd></dl>

<hr>
<a name="Public-API-2"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-main-class-1" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#State" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#State-as-a-list" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.6.4 Public API</h3>

<dl>
<dt><a name="index-state_003f"></a>Scheme Procedure: <strong>state?</strong><em> object</em></dt>
<dd><p>Check if <var>object</var> is an instance of the <code>&lt;state&gt;</code> class.
</p></dd></dl>

<dl>
<dt><a name="index-equal_003f"></a>Scheme Procedure: <strong>equal?</strong><em> state-1 state-2</em></dt>
<dd><p>Check if <var>state-1</var> is equal to <var>state-2</var>.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dname"></a>Scheme Procedure: <strong>state-name</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Get the state name as a <code>&lt;string&gt;</code>.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dname-1"></a>Scheme Procedure: <strong>state-name</strong><em> (state &lt;symbol&gt;)</em></dt>
<dd><p>Special version of procedure that return the symbol itself.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dhas_002devent_002dsource_003f"></a>Scheme Procedure: <strong>state-has-event-source?</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Check if a <var>state</var> has an event source.
</p></dd></dl>

<dl>
<dt><a name="index-state_002ddescription"></a>Scheme Procedure: <strong>state-description</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Get the state description as a <code>&lt;string&gt;</code> if it is available, return
<code>#f</code> otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-state_002devent_002dsource"></a>Scheme Procedure: <strong>state-event-source</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Get the <var>state</var> event source procedure.
</p></dd></dl>

<dl>
<dt><a name="index-state_002devent_002dsource_002dset_0021"></a>Scheme Procedure: <strong>state-event-source-set!</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Set the <var>state</var> event source procedure.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dentry_002daction"></a>Scheme Procedure: <strong>state-entry-action</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Get the <var>state</var> entry action procedure.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dentry_002daction_002dset_0021"></a>Scheme Procedure: <strong>state-entry-action-set!</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Set the <var>state</var> entry action procedure.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dexit_002daction"></a>Scheme Procedure: <strong>state-exit-action</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Get the <var>state</var> exit action procedure.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dexit_002daction_002dset_0021"></a>Scheme Procedure: <strong>state-exit-action-set!</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Set the <var>state</var> exit action procedure.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dtransitions"></a>Scheme Procedure: <strong>state-transitions</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Get the state transitions as a list.
</p></dd></dl>


<dl>
<dt><a name="index-state_002dtransition_002dadd_0021"></a>Scheme Procedure: <strong>state-transition-add!</strong><em> (state &lt;state&gt;) (tguard &lt;procedure&gt;) (action &lt;procedure&gt;) next-state</em></dt>
<dd><p>Add a new transition to the <var>state</var>.
</p>
<p>A transition consists of a transition guard <var>tguard</var> (which must be a
predicate) and a transition <var>action</var>.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dtransition_002dcount"></a>Scheme Procedure: <strong>state-transition-count</strong><em> (state &lt;state&gt;)</em></dt>
<dt><a name="index-state_002dtransition_002dcount-1"></a>Scheme Procedure: <strong>state-transition-count</strong><em> (state &lt;state&gt;) to</em></dt>
<dd><p>Get the transitions count for a <var>state</var>.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dtransition_002dcount_002fforeign"></a>Scheme Procedure: <strong>state-transition-count/foreign</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Get the foreign transitions count for a <var>state</var>.  A foreign transition is
a transition that points to another state.
</p></dd></dl>

<dl>
<dt><a name="index-state_002drecurrent_002dlinks_002dcount"></a>Scheme Procedure: <strong>state-recurrent-links-count</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Get the number of recurrent links (that is, links that point to the state
itself) for a <var>state</var>.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dhas_002drecurrent_002dlinks_003f"></a>Scheme Procedure: <strong>state-has-recurrent-links?</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Check if a <var>state</var> has recurrent links.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dfinal_002dtransitions"></a>Scheme Procedure: <strong>state-final-transitions</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Get the number of final transitions for a <var>state</var>.
</p></dd></dl>

<dl>
<dt><a name="index-state_002dhas_002dfinal_002dtransitions_003f"></a>Scheme Procedure: <strong>state-has-final-transitions?</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Check if a <var>state</var> has any final transitions.
</p></dd></dl>

<dl>
<dt><a name="index-state_002ddead_002dend_003f"></a>Scheme Procedure: <strong>state-dead-end?</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Check if a <var>state</var> is a dead-end state. A state is considered a dead-end
if it has no foreign transitions, has recurrent links and has no final
transitions.
</p></dd></dl>

<dl>
<dt><a name="index-state_002drun"></a>Scheme Procedure: <strong>state-run</strong><em> (state &lt;state&gt;) event context</em></dt>
<dd><p>Run a <var>state</var>.  Returns two values: next state (or <code>#f</code>) and new
context.
</p></dd></dl>

<hr>
<a name="State-as-a-list"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Public-API-2" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Public-API-2" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#List_002fstate-conversion" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.6.4.1 State as a list</h4>

<p>State serialized to an associative list of the following form:
</p>
<div class="example">
<pre class="example">lisp
   `((name         . state-name)
     (description  . &quot;State description&quot;)
     (event-source . ,event-source:state-name)
     (entry-action . ,some-entry-action)
     (transitions
      (,guard:...    ,action:...    next-state-name-1)
      (,guard:...    ,action:...    next-state-name-1)
      (,guard:...    ,action:...    next-state-name-2)))
</pre></div>

<dl>
<dt><a name="index-state_003aname"></a>Scheme Procedure: <strong>state:name</strong><em> state</em></dt>
<dt><a name="index-state_003adescription"></a>Scheme Procedure: <strong>state:description</strong><em> state</em></dt>
<dt><a name="index-state_003atransitions"></a>Scheme Procedure: <strong>state:transitions</strong><em> state</em></dt>
<dt><a name="index-state_003aevent_002dsource"></a>Scheme Procedure: <strong>state:event-source</strong><em> state</em></dt>
<dt><a name="index-state_003aentry_002daction"></a>Scheme Procedure: <strong>state:entry-action</strong><em> state</em></dt>
<dt><a name="index-state_003aexit_002daction"></a>Scheme Procedure: <strong>state:exit-action</strong><em> state</em></dt>
<dd><p>Get the corresponding element of a <var>state</var> alist.
</p></dd></dl>

<dl>
<dt><a name="index-state_003aevent_002dsource_002fname"></a>Scheme Procedure: <strong>state:event-source/name</strong><em> state</em></dt>
<dd><p>Get the name of a <var>state</var> event source procedure. Returns <code>#f</code> when
no event source is set.
</p></dd></dl>

<hr>
<a name="List_002fstate-conversion"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#State-as-a-list" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Public-API-2" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Transition" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.6.4.2 List/state conversion</h4>

<dl>
<dt><a name="index-list_002d_003estate"></a>Scheme Procedure: <strong>list-&gt;state</strong><em> (lst &lt;list&gt;)</em></dt>
<dd><p>Convert a list <var>lst</var> to a <code>&lt;state&gt;</code> instance, return the new state.
</p></dd></dl>

<dl>
<dt><a name="index-state_002d_003elist"></a>Scheme Procedure: <strong>state-&gt;list</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Convert a <var>state</var> to an associative list.
</p></dd></dl>

<dl>
<dt><a name="index-state_002d_003elist_002fserialized"></a>Scheme Procedure: <strong>state-&gt;list/serialized</strong><em> (state &lt;state&gt;)</em></dt>
<dd><p>Convert a <var>state</var> to an associative list, replace all the procedures with
their names.
</p></dd></dl>


<hr>
<a name="Transition"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#List_002fstate-conversion" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-Reference" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Transition-Accessors" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Transition-1"></a>
<h2 class="section">3.7 Transition</h2>
<a name="index-Transition"></a>
<a name="index-Transition-Guard"></a>
<a name="index-Transition-Action"></a>
<a name="index-Transition-Next-State"></a>

<p>The <code>(smc core transition)</code> module contains the implementation of FSM
transition class.
</p>
<p>In the realm of finite-state machines a <em>transition</em> is a set of actions
to be executed when a condition is fulfilled or when an event is received.
</p>
<p>A Guile-SMC transition instance contains a transition <em>guard</em> that allows
the transition to happen.  When the guard returns <code>#t</code> (that is, when the
transition condition specified by the guard is fulfilled) a transition
<em>action</em> is performed.
</p>
<p>Each Guile-SMC transition has single <em>next state</em> that points to the next
state to which transition switches the parent finite-state machine.
</p>
<p>A single transition take the following form:
</p><div class="example">
<pre class="example">lisp
(list guard:some-guard action:some-action 'state1)
</pre></div>

<p>The first part of the transition in the example is <code>guard:some-guard</code>
that represent a Guile-SMC guard procedure.
</p>
<p>The second part is <code>action:some-action</code> &ndash; the transition action that is
performed when the guard returns <code>#t</code>.
</p>
<p>The third part is <code>'state-1</code> &ndash; the next state to which the transition
will switch the parent FSM.
</p>
<p>Note that the next state can be either a state name (as a Guile symbol) or a
reference to a <code>&lt;state&gt;</code> instance.
</p>
<hr>
<a name="Transition-Accessors"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Transition" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Transition" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Transition-Table" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.7.1 Transition Accessors</h3>

<p>A Guile-SMC transition content can be conveniently accessed by means of the
following procedures.
</p>
<dl>
<dt><a name="index-transition_003aguard"></a>Scheme Procedure: <strong>transition:guard</strong><em> (transition &lt;list&gt;)</em></dt>
<dd><p>Get the <var>transition</var> guard procedure.
</p></dd></dl>

<dl>
<dt><a name="index-transition_003aaction"></a>Scheme Procedure: <strong>transition:action</strong><em> (transition &lt;list&gt;)</em></dt>
<dd><p>Get the <var>transition</var> action procedure.
</p></dd></dl>

<dl>
<dt><a name="index-transition_003anext_002dstate"></a>Scheme Procedure: <strong>transition:next-state</strong><em> (transition &lt;list&gt;)</em></dt>
<dd><p>Get the <var>transition</var> next state.
</p></dd></dl>

<hr>
<a name="Transition-Table"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Transition-Accessors" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Transition" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Context" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.7.2 Transition Table</h3>
<a name="index-Transition-Table"></a>

<p>Guile-SMC transitions are grouped into <em>transition tables</em>.  Let&rsquo;s take a
look at the following example:
</p>
<div class="example">
<pre class="example">lisp
(list (list guard:some-guard action:action-1 'state1)
      (list guard:#t         action:action-2 'state2))
</pre></div>

<p>This transition table consists of two possible transitions: to <code>state-1</code>
and to <code>state-2</code>.  In the closer look this form resembles classic
state-transition tables:
</p>
<div class="example">
<pre class="example">current state | input            | output (action) | next state
--------------+------------------+-----------------+-------------------
state-2       | guard:some-guard | action:action-1 | state-1
state-2       | guard:#t         | action:action-2 | state-2
</pre></div>

<p>In the above example of Guile-SMC transition table there&rsquo;s no &ldquo;current
state&rdquo; as a <code>&lt;state&gt;</code> instance holds its transition table so there&rsquo;s no
need to store the current state in the transition table itself.
</p>
<dl>
<dt><a name="index-transition_002dtable_002dcount"></a>Scheme Procedure: <strong>transition-table-count</strong><em> (predicate &lt;procedure&gt;) (tlist &lt;list&gt;)</em></dt>
<dd><p>Return number of the elements in the <var>tlist</var> transition table for which
<var>predicate</var> returns #t.
</p>
<p><var>predicate</var> is called on each transition.
</p>
<p>To get the total number of transitions in a transition table pass <code>(const
#t)</code> procedure as predicate:
</p>
<div class="example">
<pre class="example">lisp
(transition-table-count (const #t) some-transition-table)
</pre></div>

</dd></dl>

<dl>
<dt><a name="index-transition_002dtable_002drun"></a>Scheme Procedure: <strong>transition-table-run</strong><em> (tlist &lt;list&gt;) event context</em></dt>
<dd><p>Run a <var>tlist</var> transition table on the specified <var>event</var> and a
<var>context</var>, return two values: the next state and a new context.
</p>
<p>If no guards returned <code>#t</code> the procedure returns <code>#f</code> as the next
state.
</p></dd></dl>

<dl>
<dt><a name="index-transition_002dtable_002dappend"></a>Scheme Procedure: <strong>transition-table-append</strong><em> (tlist &lt;list&gt;) @</em></dt>
<dd><p>                                                  (tguard &lt;procedure&gt;) @
                                                  (action &lt;procedure&gt;) @
                                                  next-state)
</p>
<p>Append a new transition to the end of a <var>tlist</var> transition table. Return a
new transition table with the new transition.
</p></dd></dl>


<a name="index-Context"></a>
<hr>
<a name="Context"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Transition-Table" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-Reference" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Guards" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Context-1"></a>
<h2 class="section">3.8 Context</h2>

<p><code>(smc context)</code> contains the implementation of contexts that can be used
to provide required FSM guards, actions, event sources and some data
structures.
</p>
<p>In a broad sense a <em>context</em> is an aggregate of an FSM memory that is
passed between each state, guards, actions and all the auxiliary procedures
that are required for the FSM machinery to work.
</p>
<a name="index-Guard"></a>
<hr>
<a name="Guards"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Context" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Context" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Actions" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.8.1 Guards</h3>
<p>A guard is a predicate that takes a context and an event and returns <code>#t</code>
or <code>#f</code>.
</p>
<p>Each transition path in a FSM is guarded by a <em>guard</em>, when a guard
returns <code>#t</code> the FSM transitions to the next state guarded by the guard
and a <em>transition action</em> is performed.
</p>
<a name="index-Action"></a>
<hr>
<a name="Actions"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Guards" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Context" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Pre_002ddefined-Guards" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.8.2 Actions</h3>
<p>An action can be attached to a state transition (thus producing a
<em>transition action</em>) or to a state itself (in the form of either
<em>entry action</em> or <em>exit action</em>.)
</p>
<p>A <em>transition action</em> is performed when its transition guard returns
<code>#t</code>.
</p>
<hr>
<a name="Pre_002ddefined-Guards"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actions" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Context" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0060_0060common_0027_0027" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.8.3 Pre-defined Guards</h3>

<p>Note that Guile-SMC can use any Scheme object as the context memory for a
finite-state machine.  The pre-defined guards and actions do not depend on any
specific context memory type.
</p>
<hr>
<a name="g_t_0060_0060common_0027_0027"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Pre_002ddefined-Guards" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Pre_002ddefined-Guards" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0060_0060char_0027_0027" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.8.3.1 &ldquo;common&rdquo;</h4>

<dl>
<dt><a name="index-guard_003a_0023t"></a>Scheme Procedure: <strong>guard:#t</strong><em> context event</em></dt>
<dd><p>This is &ldquo;default&rdquo; guard that just always returns <code>#t</code>.
</p></dd></dl>

<dl>
<dt><a name="index-action_003ano_002dop"></a>Scheme Procedure: <strong>action:no-op</strong><em> context event</em></dt>
<dd><p>This is &ldquo;no operation&rdquo; action that just returns the <var>context</var> as is.
</p></dd></dl>

<hr>
<a name="g_t_0060_0060char_0027_0027"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0060_0060common_0027_0027" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Pre_002ddefined-Guards" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0060_0060u8_0027_0027" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.8.3.2 &ldquo;char&rdquo;</h4>
<p><code>(smc context char)</code> module provides guards for working with characters.
There are lots of predicates such as <code>char:left-parenthesis?</code>,
<code>char:right-parenthesis?</code>, <code>char:single-quote?</code> etc.
</p>
<p>Please see the module source code for the full list of predicates.
</p>
<hr>
<a name="g_t_0060_0060u8_0027_0027"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0060_0060char_0027_0027" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Pre_002ddefined-Guards" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Context-Memory" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.8.3.3 &ldquo;u8&rdquo;</h4>

<p><code>(smc context u8)</code> module provides guards for working with bytes.  It
contains the same predicates as <code>(smc context char)</code> but the predicates
are accepting numbers instead of characters.
</p>

<a name="index-Context-Memory"></a>
<hr>
<a name="Context-Memory"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0060_0060u8_0027_0027" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-Reference" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#General-Concepts" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Context-Memory-1"></a>
<h2 class="section">3.9 Context Memory</h2>

<p>Some problems are hard to solve (or cannot be solved at all) by an FSM that
stores only its state.  Thus, some kind of memory is required to approach such
tasks.
</p>
<p>A stack is often used in such cases but naturally there are cases where
several kinds of memory is required.
</p>
<p>Although a context memory can be represented by any data type that Scheme
supports, Guile-SMC context memory provides pre-defined means for FSMs to
store a complex state.
</p>
<hr>
<a name="General-Concepts"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Context-Memory" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Context-Memory" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Functional-Memory" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.9.1 General Concepts</h3>

<p>Guile-SMC context memory has three pre-defined stacks:
</p>
<ul>
<li> Buffer
The context <em>buffer</em> holds immediate values (e.g. recently read symbols)
that have to be processed.

<p>For example, when an FSM reads DSV table like a stream of symbols, buffer may
hold the symbols of the DSV data field that being read.
</p>
</li><li> Stanza
The context <em>stanza</em> holds logical units of parsing.

<p>For example, for a DSV reader mentioned above a logical unit of parsing could
be a single table row consisting of several fields from the input file.
</p>
</li><li> Result
The context <em>result</em> holds the final result of the FSM work.

<p>For example, a DSV reader could the input table and store it as a list of
lists, where each sub-list represents a table row.
</p>
</li></ul>

<hr>
<a name="Functional-Memory"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#General-Concepts" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Context-Memory" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#generic" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.9.2 Functional Memory</h3>

<hr>
<a name="generic"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functional-Memory" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functional-Memory" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#char" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.9.2.1 generic</h4>

<p>See the <code>(smc context functional generic)</code> module.
</p>
<dl>
<dt><a name="index-_003ccontext_003e"></a>Structure: <strong>&lt;context&gt;</strong><em> debug-mode? counter buffer stanza result custom-data</em></dt>
<dd>
<p>Structure fields:
</p><dl compact="compact">
<dt><var>debug-mode?</var></dt>
<dd><p>Flag that specifies whether the debug mode for the context is enabled.
</p></dd>
<dt><var>counter</var></dt>
<dd><p>Context counter.  Can be used to count incoming events, for example.
</p></dd>
<dt><var>buffer</var></dt>
<dd><p>Context buffer to store intermediate values.
</p></dd>
<dt><var>stanza</var></dt>
<dd><p>Context stanza to store the chunks of intermediate context data.
</p></dd>
<dt><var>result</var></dt>
<dd><p>Context result to store the end result of the parser.
</p></dd>
<dt><var>custom-data</var></dt>
<dd><p>Context custom data that can be used by the custom contexts to store different
things such as ports or some data structures.
</p></dd>
</dl>

</dd></dl>

<dl>
<dt><a name="index-make_002dcontext"></a>Scheme Procedure: <strong>make-context</strong><em> [#:debug-mode?=#f] [#:counter=0] [#:buffer='()] [#:stanza='()] [#:result='()] [#:custom-data='()]</em></dt>
<dd><p>The <code>&lt;context&gt;</code> constructor.
</p></dd></dl>

<dl>
<dt><a name="index-context_002dbuffer_002freversed"></a>Scheme Procedure: <strong>context-buffer/reversed</strong><em> context</em></dt>
<dd><p>Return the reversed <var>context</var> buffer.
</p></dd></dl>

<dl>
<dt><a name="index-context_002dstanza_002freversed"></a>Scheme Procedure: <strong>context-stanza/reversed</strong><em> context</em></dt>
<dd><p>Return the reversed <var>context</var> stanza.
</p></dd></dl>

<dl>
<dt><a name="index-context_002dresult_002freversed"></a>Scheme Procedure: <strong>context-result/reversed</strong><em> context</em></dt>
<dd><p>Return the reversed <var>context</var> result.
</p></dd></dl>

<dl>
<dt><a name="index-context_002dcounter_002dupdate"></a>Scheme Procedure: <strong>context-counter-update</strong><em> context [delta=1]</em></dt>
<dd>
<p>Increment the <var>context</var> counter by <var>delta</var> value.  Return the updated
<var>context</var>.
</p></dd></dl>

<dl>
<dt><a name="index-clear_002dbuffer"></a>Scheme Procedure: <strong>clear-buffer</strong><em> context [event]</em></dt>
</dl>

<dl>
<dt><a name="index-clear_002dstanza"></a>Scheme Procedure: <strong>clear-stanza</strong><em> context [event]</em></dt>
</dl>

<dl>
<dt><a name="index-clear_002dresult"></a>Scheme Procedure: <strong>clear-result</strong><em> context [event]</em></dt>
</dl>

<dl>
<dt><a name="index-update_002dcounter"></a>Scheme Procedure: <strong>update-counter</strong><em> context [event]</em></dt>
</dl>

<dl>
<dt><a name="index-reverse_002dbuffer"></a>Scheme Procedure: <strong>reverse-buffer</strong><em> context [event]</em></dt>
</dl>

<dl>
<dt><a name="index-reverse_002dstanza"></a>Scheme Procedure: <strong>reverse-stanza</strong><em> context [event]</em></dt>
</dl>

<dl>
<dt><a name="index-reverse_002dresult"></a>Scheme Procedure: <strong>reverse-result</strong><em> context [event]</em></dt>
</dl>

<dl>
<dt><a name="index-push_002devent_002dto_002dbuffer"></a>Scheme Procedure: <strong>push-event-to-buffer</strong><em> context event</em></dt>
</dl>

<dl>
<dt><a name="index-push_002devent_002dto_002dstanza"></a>Scheme Procedure: <strong>push-event-to-stanza</strong><em> context event</em></dt>
</dl>

<dl>
<dt><a name="index-push_002devent_002dto_002dresult"></a>Scheme Procedure: <strong>push-event-to-result</strong><em> context event</em></dt>
</dl>

<hr>
<a name="char"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#generic" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functional-Memory" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#u8" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.9.2.2 char</h4>

<p><code>(smc context functional char)</code> module provides a memory for FSMs that
read and parse a stream of characters.
</p>
<hr>
<a name="u8"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#char" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functional-Memory" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#OOP" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">3.9.2.3 u8</h4>

<p><code>(smc context functional u8)</code> module provides a memory for FSMs that
read and parse a stream of bytes.
</p>
<hr>
<a name="OOP"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#u8" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Context-Memory" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">3.9.3 OOP</h3>

<p><code>(smc context oop)</code> modules provide a memory for FSMs that is written in
GOOPS style.
</p>


<hr>
<a name="Command_002dLine-Interface"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-Reference" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#OOP" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#The-Compiler" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Command_002dLine-Interface-1"></a>
<h1 class="chapter">4 Command-Line Interface</h1>
<a name="index-CLI"></a>

<p>Guile-SMC has a <acronym title="Command-Line Interface">CLI</acronym> (Command-Line Interface) that provides access to
its features.  It is built upon <code>(smc cli)</code> module that contains
<acronym title="Application Programming Interface">API</acronym> (Application Programming Interface) for the tool.
</p>
<p>The CLI tool is called simply &lsquo;<tt>smc</tt>&rsquo;.  Please see <code>smc --help</code>
output or <code>man smc</code> for usage information.
</p>
<hr>
<a name="The-Compiler"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Compilation-Targets" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">4.1 The Compiler</h2>
<p>The state machine compiler allows to compile state machines from a formal
description (currently only PlantUML format is supported.)
</p>
<p>The compiler can be invoked by <code>smc compile</code> command.
</p>
<p>You can get the actual help message for <code>smc compile</code> by passing it the
<code>--help</code> option.
</p>
<hr>
<a name="Compilation-Targets"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Compiler" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Compiler" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#guile-target" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">4.1.1 Compilation Targets</h3>
<a name="index-Compilation-Targets"></a>

<p>A Guile-SMC <em>compilation target</em> changes the compiler behavior so it
produces the code in different form.
</p>
<hr>
<a name="guile-target"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Compilation-Targets" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Compilation-Targets" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#guile_002dstandalone-target" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">4.1.1.1 <code>guile</code> target</h4>
<p>The default compilation target.  The code produced by the compiler for this
target is dependent on the Guile-SMC.
</p>
<hr>
<a name="guile_002dstandalone-target"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#guile-target" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Compilation-Targets" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#The-Context-Generator-and-Analyzer" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h4 class="subsubsection">4.1.1.2 <code>guile-standalone</code> target</h4>
<p>This compilation target produces GNU Guile FSM code in a single file that does
not dependent on Guile-SMC.
</p>
<p>All required Guile-SMC procedures will be copied to the output stream, and the
extra procedures that are not used in the output code are removed by pruning.
</p>
<p>The output code is similar to hand-crafted recursive code that a Scheme
programmer could write given the knowledge of automata-based programming.
</p>
<p>Here&rsquo;s an example of an output FSM (without the auxiliary code copied from
Guile-SMC that normally goes before this procedure):
</p>
<div class="example">
<pre class="example">lisp
(define (run-fsm context)
  &quot;&quot;
  (define (DEFAULT context)
    &quot;Count parenthesis.&quot;
    (let ((event (event-source context)))
      (cond ((guard:eof-object? context event)
             (let ((context (action:validate context event)))
               (log-debug &quot;[~a] -&gt; [*]&quot; 'DEFAULT)
               context))
            ((guard:semicolon? context event)
             (let ((context (action:no-op context event)))
               (log-debug &quot;[~a] -&gt; [~a]&quot; 'DEFAULT 'COMMENT)
               (COMMENT context)))
            ((guard:double-quote? context event)
             (let ((context (action:no-op context event)))
               (log-debug &quot;[~a] -&gt; [~a]&quot; 'DEFAULT 'STRING)
               (STRING context)))
            ((#{guard:#t}# context event)
             (let ((context (action:count context event)))
               (DEFAULT context))))))
  (define (STRING context)
    &quot;Skip a string.&quot;
    (let ((event (event-source context)))
      (cond ((guard:double-quote? context event)
             (let ((context (action:no-op context event)))
               (log-debug &quot;[~a] -&gt; [~a]&quot; 'STRING 'DEFAULT)
               (DEFAULT context)))
            ((#{guard:#t}# context event)
             (let ((context (action:no-op context event)))
               (STRING context))))))
  (define (COMMENT context)
    &quot;Skip a comment.&quot;
    (let ((event (event-source context)))
      (cond ((guard:newline? context event)
             (let ((context (action:no-op context event)))
               (log-debug &quot;[~a] -&gt; [~a]&quot; 'COMMENT 'DEFAULT)
               (DEFAULT context)))
            ((#{guard:#t}# context event)
             (let ((context (action:no-op context event)))
               (COMMENT context))))))
  (DEFAULT context))
</pre></div>

<hr>
<a name="The-Context-Generator-and-Analyzer"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#guile_002dstandalone-target" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#The-Profiler" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">4.2 The Context Generator and Analyzer</h2>
<p><code>smc context</code> command allows to generate and analyze Guile-SMC FSM
contexts.
</p>
<p>There are two modes of context generation: the command either can generate a
custom context stub based on an input PlantUML state machine description, or
generate a standalone (or intermediate) context that can be used by custom
contexts to relax the dependency on Guile-SMC modules
</p>
<p>When <code>--resolve</code> option is provided the command prints to the standard
output the list of resolved and unresolved procedures based on the input
PlantUML file.
</p>
<p>Supported options:
</p><dl compact="compact">
<dt><code>--help</code>, <code>-h</code></dt>
<dd><p>Print the help message and exit.
</p></dd>
<dt><code>--resolve</code>, <code>-r</code></dt>
<dd><p>Print the resolver status.
</p></dd>
<dt><code>--standalone</code>, <code>-s</code></dt>
<dd><p>Generate a standalone compiler context.
</p></dd>
<dt><code>--type &lt;type&gt;</code>, <code>-T &lt;type&gt;</code></dt>
<dd><p>Set the context type for the output context.
</p>
<p>Expected format: <code>&lt;type&gt;[/&lt;sub-type&gt;]</code>
</p>
<p>For example: &ldquo;functional/char&rdquo;.
</p>
<p>To get the full list of supported formats, see <code>--help</code>.
</p></dd>
<dt><code>--generate</code>, <code>-g</code></dt>
<dd><p>Generate a context stub based on a provided state machine description in a
PlantUML format.
</p></dd>
<dt><code>--guile-smc-path &lt;path&gt;</code></dt>
<dd><p>Set the path where Guile-SMC modules are stored.
</p></dd>
<dt><code>--module &lt;module&gt;</code>, <code>-m &lt;module&gt;</code></dt>
<dd><p>Place the output code into a specified module
</p></dd>
<dt><code>--load-path &lt;load-path&gt;</code>, <code>-L &lt;load-path&gt;</code></dt>
<dd><p>Add an extra load path.
</p></dd>
<dt><code>--log-driver &lt;driver&gt;</code></dt>
<dd><p>Set the log driver.
</p></dd>
<dt><code>--log-opt &lt;options&gt;</code></dt>
<dd><p>Set the logging options.  The set of options depends on the logging driver.
</p></dd>
<dt><code>--debug</code></dt>
<dd><p>Enable the debug mode.
</p></dd>
</dl>

<hr>
<a name="The-Profiler"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Context-Generator-and-Analyzer" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#The-Finite-State-Machine-Runner" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">4.3 The Profiler</h2>
<a name="index-Profiler"></a>

<p>The profiler allows to analyze state machines using its logs (traces) and thus
provides facilities to detect bottlenecks in state machines in terms of
running time.
</p>
<p>Input data example:
</p>
<div class="example">
<pre class="example">2023-04-22 23:00:09.032625 (DEBUG): [*] -&gt; [read]
2023-04-22 23:00:09.032748 (DEBUG): [read] -&gt; [read_section_title]
2023-04-22 23:00:09.033559 (DEBUG): [read_section_title] -&gt; [read_section_content]
2023-04-22 23:00:09.033613 (DEBUG): [read_section_content] -&gt; [read_section_property_key]
2023-04-22 23:00:09.033675 (DEBUG): [read_section_property_key] -&gt; [trim_section_property_key]
2023-04-22 23:00:09.033717 (DEBUG): [trim_section_property_key] -&gt; [trim_section_property_value]
2023-04-22 23:00:09.033754 (DEBUG): [trim_section_property_value] -&gt; [read_section_property_value]
2023-04-22 23:00:09.033811 (DEBUG): [read_section_property_value] -&gt; [read_section_content]
2023-04-22 23:00:09.033840 (DEBUG): [read_section_content] -&gt; [read_section_property_key]
2023-04-22 23:00:09.033922 (DEBUG): [read_section_property_key] -&gt; [trim_section_property_key]
2023-04-22 23:00:09.034378 (DEBUG): [trim_section_property_key] -&gt; [trim_section_property_value]
2023-04-22 23:00:09.034415 (DEBUG): [trim_section_property_value] -&gt; [read_section_property_value]
2023-04-22 23:00:09.034450 (DEBUG): [read_section_property_value] -&gt; [read_section_content]
2023-04-22 23:00:09.034478 (DEBUG): [read_section_content] -&gt; [read_section_property_key]
2023-04-22 23:00:09.034522 (DEBUG): [read_section_property_key] -&gt; [trim_section_property_key]
2023-04-22 23:00:09.034547 (DEBUG): [trim_section_property_key] -&gt; [trim_section_property_value]
2023-04-22 23:00:09.034574 (DEBUG): [trim_section_property_value] -&gt; [read_section_property_value]
2023-04-22 23:00:09.034661 (DEBUG): [read_section_property_value] -&gt; [read_section_content]
2023-04-22 23:00:09.034700 (DEBUG): [read_section_content] -&gt; [read_section_property_key]
2023-04-22 23:00:09.034738 (DEBUG): [read_section_property_key] -&gt; [trim_section_property_key]
2023-04-22 23:00:09.034765 (DEBUG): [trim_section_property_key] -&gt; [trim_section_property_value]
2023-04-22 23:00:09.034790 (DEBUG): [trim_section_property_value] -&gt; [read_section_property_value]
2023-04-22 23:00:09.034830 (DEBUG): [read_section_property_value] -&gt; [read_section_content]
2023-04-22 23:00:09.034889 (DEBUG): [read_section_content] -&gt; [*]
</pre></div>

<p>Usage example:
</p>
<div class="example">
<pre class="example">shell
$ smc profile fsm.log
Total transitions: 99
Total time:        14925 us
Stats:
  read: 3158 us (21.1591 %)
  read_state_transition_guard: 1663 us (11.1424 %)
  read_state_transition_to: 1483 us (9.9363 %)
  read_word: 1259 us (8.4355 %)
  read_state_description: 1014 us (6.7940 %)
  read_state_right_arrow: 839 us (5.6214 %)
  search_state_transition_to: 670 us (4.4891 %)
  search_state_transition: 638 us (4.2747 %)
  read_state_transition_action: 536 us (3.5913 %)
  read_start_tag: 535 us (3.5846 %)
  search_state_transition_guard: 428 us (2.8677 %)
  read_state: 178 us (1.1926 %)
  search_state_transition_action: 139 us (.9313 %)
  read_state_action_arrow: 139 us (.9313 %)
  search_state_action_arrow: 132 us (.8844 %)
  read_end_tag: 125 us (.8375 %)
</pre></div>

<hr>
<a name="The-Finite-State-Machine-Runner"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Profiler" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Programming-API" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">4.4 The Finite State Machine Runner</h2>
<p>The state machine runner allows to run a state in <em>ad hoc</em> fashion with
the minimum amount of supporting code:
</p>
<div class="example">
<pre class="example">shell
$ smc run --help
Usage: smc run [options] &lt;puml-file&gt;

Run a state machine.

Options:
  --help, -h        Print this message and exit.
  --eval, -e &lt;procedure&gt;
                    Eval a procedure with the resulting context as a parameter.
                    Example value:
                      &quot;(lambda (context) (display context))&quot;
  --load-path, -L &lt;load-path&gt;
                    Add an extra load path.
  --context-thunk, -C &lt;procedure&gt;
                    A thunk that produces the initial value for an FSM context.
                    Example value: &quot;(lambda () 0)&quot;
  --modules, -U &lt;modules&gt;
                    Load additional modules.  The value must be the same
                    as for 'use-modules'.  Example value:
                      &quot;((smc context char-context) (smc puml-context))&quot;
  --validate        Validate the output FSM and print the validation result.
                    The exit code is 0 if the validation is passed,
                    and a non-zero value otherwise.
  --log-file &lt;file&gt; Log file to use.  Pass &quot;-&quot; as the file to use the standard
                    error stream (stderr.)
                    'smc run' logs to syslog by default.
  --debug           Enable the debug mode.
</pre></div>

<p>Usage example:
</p>
<div class="example">
<pre class="example">shell
$ smc run -L . -U &quot;((context))&quot; -C &quot;(lambda () 0)&quot; fsm.puml
</pre></div>

<hr>
<a name="Programming-API"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Finite-State-Machine-Runner" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0028smc-cli-command_002dcompile_0029" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">4.5 Programming API</h2>

<hr>
<a name="g_t_0028smc-cli-command_002dcompile_0029"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming-API" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming-API" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0028smc-cli-command_002dcontext_0029" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">4.5.1 <code>(smc cli command-compile)</code></h3>

<dl>
<dt><a name="index-command_002dcompile"></a>Scheme Procedure: <strong>command-compile</strong><em> args</em></dt>
<dd><p>Handle <code>smc compile</code> command.
</p></dd></dl>

<hr>
<a name="g_t_0028smc-cli-command_002dcontext_0029"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0028smc-cli-command_002dcompile_0029" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming-API" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0028smc-cli-command_002dprofile_0029" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">4.5.2 <code>(smc cli command-context)</code></h3>

<dl>
<dt><a name="index-command_002dcontext"></a>Scheme Procedure: <strong>command-context</strong><em> args</em></dt>
<dd><p>Handle <code>smc context</code> command.
</p></dd></dl>

<hr>
<a name="g_t_0028smc-cli-command_002dprofile_0029"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0028smc-cli-command_002dcontext_0029" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming-API" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0028smc-cli-command_002drun_0029" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">4.5.3 <code>(smc cli command-profile)</code></h3>

<dl>
<dt><a name="index-command_002dprofile"></a>Scheme Procedure: <strong>command-profile</strong><em> args</em></dt>
<dd><p>Handle <code>smc profile</code> command.
</p></dd></dl>

<hr>
<a name="g_t_0028smc-cli-command_002drun_0029"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0028smc-cli-command_002dprofile_0029" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Programming-API" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">4.5.4 <code>(smc cli command-run)</code></h3>

<dl>
<dt><a name="index-command_002drun"></a>Scheme Procedure: <strong>command-run</strong><em> args</em></dt>
<dd><p>Handle <code>smc run</code> command.
</p></dd></dl>


<hr>
<a name="GNU-Free-Documentation-License"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Command_002dLine-Interface" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#g_t_0028smc-cli-command_002drun_0029" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="GNU-Free-Documentation-License-1"></a>
<h1 class="appendix">Appendix A GNU Free Documentation License</h1>

<p align="center">Version 1.3, 3 November 2008
</p>

<div class="display">
<pre class="display">Copyright &copy; 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
<a href="http://fsf.org/">http://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></div>

<ol>
<li>
PREAMBLE

<p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <em>free</em> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.
</p>
<p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.
</p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.
</p>
</li><li>
APPLICABILITY AND DEFINITIONS

<p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.
</p>
<p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.
</p>
<p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document&rsquo;s overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.
</p>
<p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.
</p>
<p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.
</p>
<p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.
</p>
<p>Examples of suitable formats for Transparent copies include plain
<small>ASCII</small> without markup, Texinfo input format, LaTeX input
format, <acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> designed for human modification.  Examples
of transparent image formats include <acronym>PNG</acronym>, <acronym>XCF</acronym> and
<acronym>JPG</acronym>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <acronym>SGML</acronym> or
<acronym>XML</acronym> for which the <acronym>DTD</acronym> and/or processing tools are
not generally available, and the machine-generated <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> produced by some word processors for
output purposes only.
</p>
<p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work&rsquo;s title,
preceding the beginning of the body of the text.
</p>
<p>The &ldquo;publisher&rdquo; means any person or entity that distributes copies
of the Document to the public.
</p>
<p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.
</p>
<p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.
</p>
</li><li>
VERBATIM COPYING

<p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.
</p>
</li><li>
COPYING IN QUANTITY

<p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document&rsquo;s license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.
</p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.
</p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.
</p>
<p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.
</p>
</li><li>
MODIFICATIONS

<p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:
</p>
<ol>
<li>
Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

</li><li>
List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

</li><li>
State on the Title page the name of the publisher of the
Modified Version, as the publisher.

</li><li>
Preserve all the copyright notices of the Document.

</li><li>
Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

</li><li>
Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

</li><li>
Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document&rsquo;s license notice.

</li><li>
Include an unaltered copy of this License.

</li><li>
Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

</li><li>
Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section.
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

</li><li>
For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

</li><li>
Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

</li><li>
Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

</li><li>
Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

</li><li>
Preserve any Warranty Disclaimers.
</li></ol>

<p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version&rsquo;s license notice.
These titles must be distinct from any other section titles.
</p>
<p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.
</p>
<p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.
</p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.
</p>
</li><li>
COMBINING DOCUMENTS

<p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.
</p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.
</p>
<p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;
</p>
</li><li>
COLLECTIONS OF DOCUMENTS

<p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.
</p>
<p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.
</p>
</li><li>
AGGREGATION WITH INDEPENDENT WORKS

<p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation&rsquo;s users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.
</p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document&rsquo;s Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.
</p>
</li><li>
TRANSLATION

<p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.
</p>
<p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.
</p>
</li><li>
TERMINATION

<p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.
</p>
<p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.
</p>
<p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.
</p>
<p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.
</p>
</li><li>
FUTURE REVISIONS OF THIS LICENSE

<p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.
</p>
<p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy&rsquo;s public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.
</p>
</li><li>
RELICENSING

<p>&ldquo;Massive Multiauthor Collaboration Site&rdquo; (or &ldquo;MMC Site&rdquo;) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
&ldquo;Massive Multiauthor Collaboration&rdquo; (or &ldquo;MMC&rdquo;) contained in the
site means any set of copyrightable works thus published on the MMC
site.
</p>
<p>&ldquo;CC-BY-SA&rdquo; means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.
</p>
<p>&ldquo;Incorporate&rdquo; means to publish or republish a Document, in whole or
in part, as part of another Document.
</p>
<p>An MMC is &ldquo;eligible for relicensing&rdquo; if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.
</p>
<p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.
</p>
</li></ol>


<a name="ADDENDUM_003a-How-to-use-this-License-for-your-documents"></a>
<h2 class="heading">ADDENDUM: How to use this License for your documents</h2>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:
</p>
<div class="smallexample">
<pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></div>

<p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with&hellip;Texts.&rdquo; line with this:
</p>
<div class="smallexample">
<pre class="smallexample">    with the Invariant Sections being <var>list their titles</var>, with
    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
    being <var>list</var>.
</pre></div>

<p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.
</p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.
</p>




<hr>
<a name="Type-Index"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Procedure-Index" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Procedure-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Type-Index-1"></a>
<h1 class="unnumbered">Type Index</h1>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Type-Index-1_tp_symbol-1"><b>&lt;</b></a>
</td></tr></table>
<table class="index-tp" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Type-Index-1_tp_symbol-1">&lt;</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003ccontext_003e"><code>&lt;context&gt;</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003cfsm_003e"><code>&lt;fsm&gt;</code></a></td><td>&nbsp;</td><td valign="top"><a href="#The-main-class">3.1.1 The main class</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003cnull_002dlog_003e"><code>&lt;null-log&gt;</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Null-Log">3.5.2.4 Null Log</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003cprecise_002dlogger_003e"><code>&lt;precise-logger&gt;</code></a></td><td>&nbsp;</td><td valign="top"><a href="#The-Precise-Logger">3.5.1 The Precise Logger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003cprecise_002dport_002dlog_003e"><code>&lt;precise-port-log&gt;</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Precise-Port-Log">3.5.2.2 Precise Port Log</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003cpuml_002dcontext_003e"><code>&lt;puml-context&gt;</code></a></td><td>&nbsp;</td><td valign="top"><a href="#The-PlantUML-context">3.2.2 The PlantUML context</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003cstate_003e"><code>&lt;state&gt;</code></a></td><td>&nbsp;</td><td valign="top"><a href="#The-main-class-1">3.6.3 The main class</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003cstderr_002dlog_003e"><code>&lt;stderr-log&gt;</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Standard-Error-Log">3.5.2.3 Standard Error Log</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003csystem_002dlog_003e"><code>&lt;system-log&gt;</code></a></td><td>&nbsp;</td><td valign="top"><a href="#System-Log">3.5.2.1 System Log</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Type-Index-1_tp_symbol-1"><b>&lt;</b></a>
</td></tr></table>

<hr>
<a name="Procedure-Index"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Type-Index" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Concept-Index" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left">[<a href="#Concept-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Procedure-Index-1"></a>
<h1 class="unnumbered">Procedure Index</h1>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Procedure-Index-1_fn_symbol-1"><b>%</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-W"><b>W</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-fn" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_symbol-1">%</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0025default_002dentry_002daction"><code>%default-entry-action</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Default-entry_002fexit-actions">3.6.2 Default entry/exit actions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0025default_002dexit_002daction"><code>%default-exit-action</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Default-entry_002fexit-actions">3.6.2 Default entry/exit actions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0025precise_002dlog_002dformatter"><code>%precise-log-formatter</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Helper-Procedures">3.5.4 Helper Procedures</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-action_003ano_002dop"><code>action:no-op</code></a></td><td>&nbsp;</td><td valign="top"><a href="#g_t_0060_0060common_0027_0027">3.8.3.1 &ldquo;common&rdquo;</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-add_002ddescription"><code>add-description</code></a></td><td>&nbsp;</td><td valign="top"><a href="#FSM-Guards-and-Actions">3.2.2.1 FSM Guards and Actions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-add_002dstate_002dtransition"><code>add-state-transition</code></a></td><td>&nbsp;</td><td valign="top"><a href="#FSM-Guards-and-Actions">3.2.2.1 FSM Guards and Actions</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-clear_002dbuffer"><code>clear-buffer</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-clear_002dresult"><code>clear-result</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-clear_002dstanza"><code>clear-stanza</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-command_002dcompile"><code>command-compile</code></a></td><td>&nbsp;</td><td valign="top"><a href="#g_t_0028smc-cli-command_002dcompile_0029">4.5.1 <code>(smc cli command-compile)</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-command_002dcontext"><code>command-context</code></a></td><td>&nbsp;</td><td valign="top"><a href="#g_t_0028smc-cli-command_002dcontext_0029">4.5.2 <code>(smc cli command-context)</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-command_002dprofile"><code>command-profile</code></a></td><td>&nbsp;</td><td valign="top"><a href="#g_t_0028smc-cli-command_002dprofile_0029">4.5.3 <code>(smc cli command-profile)</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-command_002drun"><code>command-run</code></a></td><td>&nbsp;</td><td valign="top"><a href="#g_t_0028smc-cli-command_002drun_0029">4.5.4 <code>(smc cli command-run)</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context_002dbuffer_002freversed"><code>context-buffer/reversed</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context_002dcounter_002dupdate"><code>context-counter-update</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context_002dresult_002freversed"><code>context-result/reversed</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context_002dstanza_002freversed"><code>context-stanza/reversed</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-equal_003f"><code>equal?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-form_002dfeed"><code>form-feed</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Common-Guile-Compiler-Code">3.3.1 Common Guile Compiler Code</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002d_003estandalone_002dcode"><code>fsm-&gt;standalone-code</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile-Standalone">3.3.3 Guile Standalone</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dcompile"><code>fsm-compile</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Compiler">3.3 Compiler</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dcurrent_002dstate"><code>fsm-current-state</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dcurrent_002dstate_002dset_0021"><code>fsm-current-state-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002ddebug_002dmode_002dset_0021"><code>fsm-debug-mode-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002ddebug_002dmode_003f"><code>fsm-debug-mode?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002ddefine_002dmodule"><code>fsm-define-module</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile-Standalone">3.3.3 Guile Standalone</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002ddescription"><code>fsm-description</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002ddescription_002dset_0021"><code>fsm-description-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002devent_002dsource"><code>fsm-event-source</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002devent_002dsource_002dset_0021"><code>fsm-event-source-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dget_002dclass_002dcode"><code>fsm-get-class-code</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile-Standalone">3.3.3 Guile Standalone</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dget_002dcontext_002dcode"><code>fsm-get-context-code</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile-Standalone">3.3.3 Guile Standalone</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dincoming_002dtransition_002dcount"><code>fsm-incoming-transition-count</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Getting-information-about-an-FSM">3.1.2.2 Getting information about an FSM</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dlog_002dtransition"><code>fsm-log-transition</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Logging">3.1.2.3 Logging</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dlog_002dtransition-1"><code>fsm-log-transition</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Logging">3.1.2.3 Logging</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dlog_002dtransition-2"><code>fsm-log-transition</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Logging">3.1.2.3 Logging</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dparent_002dcontext"><code>fsm-parent-context</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dparent_002dcontext_002dset_0021"><code>fsm-parent-context-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dparent_002dfsm"><code>fsm-parent-fsm</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dparent_002dfsm_002dset_0021"><code>fsm-parent-fsm-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002drun_0021"><code>fsm-run!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Executing-a-FSM">3.1.2.1 Executing a FSM</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002drun_0021-1"><code>fsm-run!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Executing-a-FSM">3.1.2.1 Executing a FSM</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dstate"><code>fsm-state</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dstate_002dadd_0021"><code>fsm-state-add!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dstate_002dcount"><code>fsm-state-count</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Getting-information-about-an-FSM">3.1.2.2 Getting information about an FSM</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dstate_002ddescription_002dadd_0021"><code>fsm-state-description-add!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dstate_002dreachable_003f"><code>fsm-state-reachable?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Getting-information-about-an-FSM">3.1.2.2 Getting information about an FSM</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dstep_0021"><code>fsm-step!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Executing-a-FSM">3.1.2.1 Executing a FSM</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dstep_0021-1"><code>fsm-step!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Executing-a-FSM">3.1.2.1 Executing a FSM</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dstep_002dcounter"><code>fsm-step-counter</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dstep_002dcounter_002dset_0021"><code>fsm-step-counter-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dtransition_002dadd_0021"><code>fsm-transition-add!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dtransition_002dcount"><code>fsm-transition-count</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Getting-information-about-an-FSM">3.1.2.2 Getting information about an FSM</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dtransition_002dcounter"><code>fsm-transition-counter</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dtransition_002dcounter_002dset_0021"><code>fsm-transition-counter-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dtransition_002dtable"><code>fsm-transition-table</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dtransition_002dtable_002d_003estandalone_002dcode"><code>fsm-transition-table-&gt;standalone-code</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile-Standalone">3.3.3 Guile Standalone</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dtransition_002dtable_002dset_0021"><code>fsm-transition-table-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_002dvalidate"><code>fsm-validate</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Getting-information-about-an-FSM">3.1.2.2 Getting information about an FSM</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fsm_003f"><code>fsm?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-guard_003a_0023t"><code>guard:#t</code></a></td><td>&nbsp;</td><td valign="top"><a href="#g_t_0060_0060common_0027_0027">3.8.3.1 &ldquo;common&rdquo;</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-hash_002dtable_002d_003etransition_002dlist"><code>hash-table-&gt;transition-list</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-list_002d_003estate"><code>list-&gt;state</code></a></td><td>&nbsp;</td><td valign="top"><a href="#List_002fstate-conversion">3.6.4.2 List/state conversion</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002ddebug"><code>log-debug</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Logging-Procedures">3.5.5 Logging Procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002derror"><code>log-error</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Logging-Procedures">3.5.5 Logging Procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002dinfo"><code>log-info</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Logging-Procedures">3.5.5 Logging Procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002duse_002dstderr_0021"><code>log-use-stderr!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Logging-Initialization-and-Configuration">3.5.3 Logging Initialization and Configuration</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-log_002dwarning"><code>log-warning</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Logging-Procedures">3.5.5 Logging Procedures</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-make_002dcontext"><code>make-context</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_002dname"><code>module-name</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Internal-procedures">3.2.3 Internal procedures</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-null_002dlog_003f"><code>null-log?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Null-Log">3.5.2.4 Null Log</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-parse_002dentry_002daction"><code>parse-entry-action</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Internal-procedures">3.2.3 Internal procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-parse_002devent_002dsource"><code>parse-event-source</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Internal-procedures">3.2.3 Internal procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-parse_002dexit_002daction"><code>parse-exit-action</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Internal-procedures">3.2.3 Internal procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-precise_002dlogger_003f"><code>precise-logger?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#The-Precise-Logger">3.5.1 The Precise Logger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-process_002dstate_002ddescription"><code>process-state-description</code></a></td><td>&nbsp;</td><td valign="top"><a href="#FSM-Guards-and-Actions">3.2.2.1 FSM Guards and Actions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-prune_002dunused_002ddefinitions"><code>prune-unused-definitions</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile-Standalone">3.3.3 Guile Standalone</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-puml_002d_003efsm"><code>puml-&gt;fsm</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API">3.2.1 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-puml_002dcontext_002dfsm"><code>puml-context-fsm</code></a></td><td>&nbsp;</td><td valign="top"><a href="#The-PlantUML-context">3.2.2 The PlantUML context</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-puml_002dcontext_002dfsm_002dset_0021"><code>puml-context-fsm-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#The-PlantUML-context">3.2.2 The PlantUML context</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-puml_002dcontext_002dkeep_002dgoing_003f"><code>puml-context-keep-going?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#The-PlantUML-context">3.2.2 The PlantUML context</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-puml_002dcontext_002dmodule"><code>puml-context-module</code></a></td><td>&nbsp;</td><td valign="top"><a href="#The-PlantUML-context">3.2.2 The PlantUML context</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-puml_002dcontext_002dprint_002dresolver_002dstatus"><code>puml-context-print-resolver-status</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Resolver-status">3.2.2.2 Resolver status</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-puml_002dcontext_002dresolved_002dprocedures"><code>puml-context-resolved-procedures</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Resolver-status">3.2.2.2 Resolver status</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-puml_002dcontext_002dunresolved_002dprocedures"><code>puml-context-unresolved-procedures</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Resolver-status">3.2.2.2 Resolver status</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-puml_002derror"><code>puml-error</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Internal-procedures">3.2.3 Internal procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-puml_002derror-1"><code>puml-error</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Internal-procedures">3.2.3 Internal procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-puml_002dstring_002d_003efsm"><code>puml-string-&gt;fsm</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API">3.2.1 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-push_002devent_002dto_002dbuffer"><code>push-event-to-buffer</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-push_002devent_002dto_002dresult"><code>push-event-to-result</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-push_002devent_002dto_002dstanza"><code>push-event-to-stanza</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-resolve_002dprocedure"><code>resolve-procedure</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Internal-procedures">3.2.3 Internal procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reverse_002dbuffer"><code>reverse-buffer</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reverse_002dresult"><code>reverse-result</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reverse_002dstanza"><code>reverse-stanza</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-smc_002dlog"><code>smc-log</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Logging-Procedures">3.5.5 Logging Procedures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-smc_002dlog_002dinit_0021"><code>smc-log-init!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Logging-Initialization-and-Configuration">3.5.3 Logging Initialization and Configuration</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-smc_002dversion"><code>smc-version</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Version">3.4 Version</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-smc_002dversion_002fmajor"><code>smc-version/major</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Version">3.4 Version</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-smc_002dversion_002fminor"><code>smc-version/minor</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Version">3.4 Version</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-smc_002dversion_002fpatch"><code>smc-version/patch</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Version">3.4 Version</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-smc_002dversion_002fstring"><code>smc-version/string</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Version">3.4 Version</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002d_003elist"><code>state-&gt;list</code></a></td><td>&nbsp;</td><td valign="top"><a href="#List_002fstate-conversion">3.6.4.2 List/state conversion</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002d_003elist_002fserialized"><code>state-&gt;list/serialized</code></a></td><td>&nbsp;</td><td valign="top"><a href="#List_002fstate-conversion">3.6.4.2 List/state conversion</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002d_003estandalone_002dcode"><code>state-&gt;standalone-code</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile-Standalone">3.3.3 Guile Standalone</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002ddead_002dend_003f"><code>state-dead-end?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002ddescription"><code>state-description</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dentry_002daction"><code>state-entry-action</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dentry_002daction_002dset_0021"><code>state-entry-action-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002devent_002dsource"><code>state-event-source</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002devent_002dsource_002dset_0021"><code>state-event-source-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dexit_002daction"><code>state-exit-action</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dexit_002daction_002dset_0021"><code>state-exit-action-set!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dfinal_002dtransitions"><code>state-final-transitions</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dhas_002devent_002dsource_003f"><code>state-has-event-source?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dhas_002dfinal_002dtransitions_003f"><code>state-has-final-transitions?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dhas_002drecurrent_002dlinks_003f"><code>state-has-recurrent-links?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dname"><code>state-name</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dname-1"><code>state-name</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002drecurrent_002dlinks_002dcount"><code>state-recurrent-links-count</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002drun"><code>state-run</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dtransition_002dadd_0021"><code>state-transition-add!</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dtransition_002dcount"><code>state-transition-count</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dtransition_002dcount-1"><code>state-transition-count</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dtransition_002dcount_002fforeign"><code>state-transition-count/foreign</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_002dtransitions"><code>state-transitions</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_003adescription"><code>state:description</code></a></td><td>&nbsp;</td><td valign="top"><a href="#State-as-a-list">3.6.4.1 State as a list</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_003aentry_002daction"><code>state:entry-action</code></a></td><td>&nbsp;</td><td valign="top"><a href="#State-as-a-list">3.6.4.1 State as a list</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_003aevent_002dsource"><code>state:event-source</code></a></td><td>&nbsp;</td><td valign="top"><a href="#State-as-a-list">3.6.4.1 State as a list</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_003aevent_002dsource_002fname"><code>state:event-source/name</code></a></td><td>&nbsp;</td><td valign="top"><a href="#State-as-a-list">3.6.4.1 State as a list</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_003aexit_002daction"><code>state:exit-action</code></a></td><td>&nbsp;</td><td valign="top"><a href="#State-as-a-list">3.6.4.1 State as a list</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_003aname"><code>state:name</code></a></td><td>&nbsp;</td><td valign="top"><a href="#State-as-a-list">3.6.4.1 State as a list</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_003atransitions"><code>state:transitions</code></a></td><td>&nbsp;</td><td valign="top"><a href="#State-as-a-list">3.6.4.1 State as a list</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-state_003f"><code>state?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-2">3.6.4 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-string_002ddrop_002dboth"><code>string-drop-both</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile-Standalone">3.3.3 Guile Standalone</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-system_002dlog_003f"><code>system-log?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#System-Log">3.5.2.1 System Log</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-throw_002dno_002dstart_002dtag_002derror"><code>throw-no-start-tag-error</code></a></td><td>&nbsp;</td><td valign="top"><a href="#FSM-Guards-and-Actions">3.2.2.1 FSM Guards and Actions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-throw_002dunexpected_002dend_002dof_002dfile_002derror"><code>throw-unexpected-end-of-file-error</code></a></td><td>&nbsp;</td><td valign="top"><a href="#FSM-Guards-and-Actions">3.2.2.1 FSM Guards and Actions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-title_003f"><code>title?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#FSM-Guards-and-Actions">3.2.2.1 FSM Guards and Actions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transition_002dlist_002d_003ehash_002dtable"><code>transition-list-&gt;hash-table</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Public-API-1">3.1.2 Public API</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transition_002dtable_002dappend"><code>transition-table-append</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Transition-Table">3.7.2 Transition Table</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transition_002dtable_002dcount"><code>transition-table-count</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Transition-Table">3.7.2 Transition Table</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transition_002dtable_002drun"><code>transition-table-run</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Transition-Table">3.7.2 Transition Table</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transition_003aaction"><code>transition:action</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Transition-Accessors">3.7.1 Transition Accessors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transition_003aguard"><code>transition:guard</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Transition-Accessors">3.7.1 Transition Accessors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transition_003anext_002dstate"><code>transition:next-state</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Transition-Accessors">3.7.1 Transition Accessors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tree_002dcontains_003f"><code>tree-contains?</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile-Standalone">3.3.3 Guile Standalone</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-U">U</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-update_002dcounter"><code>update-counter</code></a></td><td>&nbsp;</td><td valign="top"><a href="#generic">3.9.2.1 generic</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-validate_002dend_002dtag"><code>validate-end-tag</code></a></td><td>&nbsp;</td><td valign="top"><a href="#FSM-Guards-and-Actions">3.2.2.1 FSM Guards and Actions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-validate_002dstart_002dtag"><code>validate-start-tag</code></a></td><td>&nbsp;</td><td valign="top"><a href="#FSM-Guards-and-Actions">3.2.2.1 FSM Guards and Actions</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Procedure-Index-1_fn_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-write_002ddefine_002dclass"><code>write-define-class</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile">3.3.2 Guile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write_002dfooter"><code>write-footer</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Common-Guile-Compiler-Code">3.3.1 Common Guile Compiler Code</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write_002dheader"><code>write-header</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Common-Guile-Compiler-Code">3.3.1 Common Guile Compiler Code</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write_002dinitialize"><code>write-initialize</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile">3.3.2 Guile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write_002dmodule"><code>write-module</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile">3.3.2 Guile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write_002dparent_002dfsm_002dinfo"><code>write-parent-fsm-info</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Common-Guile-Compiler-Code">3.3.1 Common Guile Compiler Code</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write_002dsection_002dheader"><code>write-section-header</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Common-Guile-Compiler-Code">3.3.1 Common Guile Compiler Code</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write_002dtransition_002dtable"><code>write-transition-table</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile">3.3.2 Guile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-write_002duse_002dmodules"><code>write-use-modules</code></a></td><td>&nbsp;</td><td valign="top"><a href="#Guile">3.3.2 Guile</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Procedure-Index-1_fn_symbol-1"><b>%</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter" href="#Procedure-Index-1_fn_letter-W"><b>W</b></a>
 &nbsp; 
</td></tr></table>

<hr>
<a name="Concept-Index"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Procedure-Index" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Procedure-Index" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt; ]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Concept-Index-1"></a>
<h1 class="unnumbered">Concept Index</h1>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Concept-Index-1_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-V"><b>V</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-cp" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Action">Action</a></td><td>&nbsp;</td><td valign="top"><a href="#Guards">3.8.1 Guards</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-CLI">CLI</a></td><td>&nbsp;</td><td valign="top"><a href="#Command_002dLine-Interface">4 Command-Line Interface</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Compilation-Targets">Compilation Targets</a></td><td>&nbsp;</td><td valign="top"><a href="#Compilation-Targets">4.1.1 Compilation Targets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Compiler">Compiler</a></td><td>&nbsp;</td><td valign="top"><a href="#Compiler">3.3 Compiler</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Context">Context</a></td><td>&nbsp;</td><td valign="top"><a href="#Transition-Table">3.7.2 Transition Table</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Context-Memory">Context Memory</a></td><td>&nbsp;</td><td valign="top"><a href="#g_t_0060_0060u8_0027_0027">3.8.3.3 &ldquo;u8&rdquo;</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-FSM">FSM</a></td><td>&nbsp;</td><td valign="top"><a href="#FSM">3.1 FSM</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FSM-logging">FSM logging</a></td><td>&nbsp;</td><td valign="top"><a href="#Logging">3.1.2.3 Logging</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Guard">Guard</a></td><td>&nbsp;</td><td valign="top"><a href="#Context">3.8 Context</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Profiler">Profiler</a></td><td>&nbsp;</td><td valign="top"><a href="#The-Profiler">4.3 The Profiler</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-State">State</a></td><td>&nbsp;</td><td valign="top"><a href="#State">3.6 State</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Transition">Transition</a></td><td>&nbsp;</td><td valign="top"><a href="#Transition">3.7 Transition</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Transition-Action">Transition Action</a></td><td>&nbsp;</td><td valign="top"><a href="#Transition">3.7 Transition</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Transition-Guard">Transition Guard</a></td><td>&nbsp;</td><td valign="top"><a href="#Transition">3.7 Transition</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Transition-Next-State">Transition Next State</a></td><td>&nbsp;</td><td valign="top"><a href="#Transition">3.7 Transition</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Transition-Table">Transition Table</a></td><td>&nbsp;</td><td valign="top"><a href="#Transition-Table">3.7.2 Transition Table</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Versioning">Versioning</a></td><td>&nbsp;</td><td valign="top"><a href="#Version">3.4 Version</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Concept-Index-1_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index-1_cp_letter-V"><b>V</b></a>
 &nbsp; 
</td></tr></table>

<hr size="6">
<a name="SEC_Contents"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1>Table of Contents</h1>

<div class="contents">

<ul class="no-bullet">
  <li><a name="toc-Introduction-1" href="#Introduction">1 Introduction</a></li>
  <li><a name="toc-Installation-1" href="#Installation">2 Installation</a></li>
  <li><a name="toc-API-Reference-1" href="#API-Reference">3 API Reference</a>
  <ul class="no-bullet">
    <li><a name="toc-FSM-1" href="#FSM">3.1 FSM</a>
    <ul class="no-bullet">
      <li><a name="toc-The-main-class" href="#The-main-class">3.1.1 The main class</a></li>
      <li><a name="toc-Public-API-1" href="#Public-API-1">3.1.2 Public API</a>
      <ul class="no-bullet">
        <li><a name="toc-Executing-a-FSM" href="#Executing-a-FSM">3.1.2.1 Executing a FSM</a></li>
        <li><a name="toc-Getting-information-about-an-FSM" href="#Getting-information-about-an-FSM">3.1.2.2 Getting information about an FSM</a></li>
        <li><a name="toc-Logging" href="#Logging">3.1.2.3 Logging</a></li>
      </ul>
</li>
    </ul></li>
    <li><a name="toc-PlantUML-1" href="#PlantUML">3.2 PlantUML</a>
    <ul class="no-bullet">
      <li><a name="toc-Public-API" href="#Public-API">3.2.1 Public API</a></li>
      <li><a name="toc-The-PlantUML-context" href="#The-PlantUML-context">3.2.2 The PlantUML context</a>
      <ul class="no-bullet">
        <li><a name="toc-FSM-Guards-and-Actions" href="#FSM-Guards-and-Actions">3.2.2.1 FSM Guards and Actions</a></li>
        <li><a name="toc-Resolver-status" href="#Resolver-status">3.2.2.2 Resolver status</a></li>
      </ul></li>
      <li><a name="toc-Internal-procedures" href="#Internal-procedures">3.2.3 Internal procedures</a></li>
    </ul></li>
    <li><a name="toc-Compiler-1" href="#Compiler">3.3 Compiler</a>
    <ul class="no-bullet">
      <li><a name="toc-Common-Guile-Compiler-Code" href="#Common-Guile-Compiler-Code">3.3.1 Common Guile Compiler Code</a></li>
      <li><a name="toc-Guile" href="#Guile">3.3.2 Guile</a></li>
      <li><a name="toc-Guile-Standalone" href="#Guile-Standalone">3.3.3 Guile Standalone</a></li>
      <li><a name="toc-Examples" href="#Examples">3.3.4 Examples</a></li>
    </ul></li>
    <li><a name="toc-Version-1" href="#Version">3.4 Version</a></li>
    <li><a name="toc-Log-1" href="#Log">3.5 Log</a>
    <ul class="no-bullet">
      <li><a name="toc-The-Precise-Logger" href="#The-Precise-Logger">3.5.1 The Precise Logger</a></li>
      <li><a name="toc-Log-Drivers" href="#Log-Drivers">3.5.2 Log Drivers</a>
      <ul class="no-bullet">
        <li><a name="toc-System-Log" href="#System-Log">3.5.2.1 System Log</a></li>
        <li><a name="toc-Precise-Port-Log" href="#Precise-Port-Log">3.5.2.2 Precise Port Log</a></li>
        <li><a name="toc-Standard-Error-Log" href="#Standard-Error-Log">3.5.2.3 Standard Error Log</a></li>
        <li><a name="toc-Null-Log" href="#Null-Log">3.5.2.4 Null Log</a></li>
      </ul></li>
      <li><a name="toc-Logging-Initialization-and-Configuration" href="#Logging-Initialization-and-Configuration">3.5.3 Logging Initialization and Configuration</a></li>
      <li><a name="toc-Helper-Procedures" href="#Helper-Procedures">3.5.4 Helper Procedures</a></li>
      <li><a name="toc-Logging-Procedures" href="#Logging-Procedures">3.5.5 Logging Procedures</a></li>
    </ul></li>
    <li><a name="toc-State-1" href="#State">3.6 State</a>
    <ul class="no-bullet">
      <li><a name="toc-Actions-1" href="#Actions-1">3.6.1 Actions</a></li>
      <li><a name="toc-Default-entry_002fexit-actions" href="#Default-entry_002fexit-actions">3.6.2 Default entry/exit actions</a></li>
      <li><a name="toc-The-main-class-1" href="#The-main-class-1">3.6.3 The main class</a></li>
      <li><a name="toc-Public-API-2" href="#Public-API-2">3.6.4 Public API</a>
      <ul class="no-bullet">
        <li><a name="toc-State-as-a-list" href="#State-as-a-list">3.6.4.1 State as a list</a></li>
        <li><a name="toc-List_002fstate-conversion" href="#List_002fstate-conversion">3.6.4.2 List/state conversion</a></li>
      </ul>
</li>
    </ul></li>
    <li><a name="toc-Transition-1" href="#Transition">3.7 Transition</a>
    <ul class="no-bullet">
      <li><a name="toc-Transition-Accessors" href="#Transition-Accessors">3.7.1 Transition Accessors</a></li>
      <li><a name="toc-Transition-Table" href="#Transition-Table">3.7.2 Transition Table</a></li>
    </ul></li>
    <li><a name="toc-Context-1" href="#Context">3.8 Context</a>
    <ul class="no-bullet">
      <li><a name="toc-Guards" href="#Guards">3.8.1 Guards</a></li>
      <li><a name="toc-Actions" href="#Actions">3.8.2 Actions</a></li>
      <li><a name="toc-Pre_002ddefined-Guards" href="#Pre_002ddefined-Guards">3.8.3 Pre-defined Guards</a>
      <ul class="no-bullet">
        <li><a name="toc-_0060_0060common_0027_0027" href="#g_t_0060_0060common_0027_0027">3.8.3.1 &ldquo;common&rdquo;</a></li>
        <li><a name="toc-_0060_0060char_0027_0027" href="#g_t_0060_0060char_0027_0027">3.8.3.2 &ldquo;char&rdquo;</a></li>
        <li><a name="toc-_0060_0060u8_0027_0027" href="#g_t_0060_0060u8_0027_0027">3.8.3.3 &ldquo;u8&rdquo;</a></li>
      </ul>
</li>
    </ul></li>
    <li><a name="toc-Context-Memory-1" href="#Context-Memory">3.9 Context Memory</a>
    <ul class="no-bullet">
      <li><a name="toc-General-Concepts" href="#General-Concepts">3.9.1 General Concepts</a></li>
      <li><a name="toc-Functional-Memory" href="#Functional-Memory">3.9.2 Functional Memory</a>
      <ul class="no-bullet">
        <li><a name="toc-generic" href="#generic">3.9.2.1 generic</a></li>
        <li><a name="toc-char" href="#char">3.9.2.2 char</a></li>
        <li><a name="toc-u8" href="#u8">3.9.2.3 u8</a></li>
      </ul></li>
      <li><a name="toc-OOP" href="#OOP">3.9.3 OOP</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Command_002dLine-Interface-1" href="#Command_002dLine-Interface">4 Command-Line Interface</a>
  <ul class="no-bullet">
    <li><a name="toc-The-Compiler" href="#The-Compiler">4.1 The Compiler</a>
    <ul class="no-bullet">
      <li><a name="toc-Compilation-Targets" href="#Compilation-Targets">4.1.1 Compilation Targets</a>
      <ul class="no-bullet">
        <li><a name="toc-guile-target" href="#guile-target">4.1.1.1 <code>guile</code> target</a></li>
        <li><a name="toc-guile_002dstandalone-target" href="#guile_002dstandalone-target">4.1.1.2 <code>guile-standalone</code> target</a></li>
      </ul>
</li>
    </ul></li>
    <li><a name="toc-The-Context-Generator-and-Analyzer" href="#The-Context-Generator-and-Analyzer">4.2 The Context Generator and Analyzer</a></li>
    <li><a name="toc-The-Profiler" href="#The-Profiler">4.3 The Profiler</a></li>
    <li><a name="toc-The-Finite-State-Machine-Runner" href="#The-Finite-State-Machine-Runner">4.4 The Finite State Machine Runner</a></li>
    <li><a name="toc-Programming-API" href="#Programming-API">4.5 Programming API</a>
    <ul class="no-bullet">
      <li><a name="toc-_0028smc-cli-command_002dcompile_0029" href="#g_t_0028smc-cli-command_002dcompile_0029">4.5.1 <code>(smc cli command-compile)</code></a></li>
      <li><a name="toc-_0028smc-cli-command_002dcontext_0029" href="#g_t_0028smc-cli-command_002dcontext_0029">4.5.2 <code>(smc cli command-context)</code></a></li>
      <li><a name="toc-_0028smc-cli-command_002dprofile_0029" href="#g_t_0028smc-cli-command_002dprofile_0029">4.5.3 <code>(smc cli command-profile)</code></a></li>
      <li><a name="toc-_0028smc-cli-command_002drun_0029" href="#g_t_0028smc-cli-command_002drun_0029">4.5.4 <code>(smc cli command-run)</code></a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-GNU-Free-Documentation-License-1" href="#GNU-Free-Documentation-License">Appendix A GNU Free Documentation License</a></li>
  <li><a name="toc-Type-Index-1" href="#Type-Index">Type Index</a></li>
  <li><a name="toc-Procedure-Index-1" href="#Procedure-Index">Procedure Index</a></li>
  <li><a name="toc-Concept-Index-1" href="#Concept-Index">Concept Index</a></li>
</ul>
</div>
<hr>
<a name="SEC_About"></a>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Type-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1>About This Document</h1>

<p>
  This document was generated on <i>August 15, 2023</i> using <a href="http://www.nongnu.org/texi2html/"><i>texi2html 5.0</i></a>.
</p>
<p>
  The buttons in the navigation panels have the following meaning:
</p>
<table border="1">
  <tr>
    <th> Button </th>
    <th> Name </th>
    <th> Go to </th>
    <th> From 1.2.3 go to</th>
  </tr>
  <tr>
    <td align="center"> [ &lt;&lt; ] </td>
    <td align="center">FastBack</td>
    <td>Beginning of this chapter or previous chapter</td>
    <td>1</td>
  </tr>
  <tr>
    <td align="center"> [ &lt; ] </td>
    <td align="center">Back</td>
    <td>Previous section in reading order</td>
    <td>1.2.2</td>
  </tr>
  <tr>
    <td align="center"> [ Up ] </td>
    <td align="center">Up</td>
    <td>Up section</td>
    <td>1.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt; ] </td>
    <td align="center">Forward</td>
    <td>Next section in reading order</td>
    <td>1.2.4</td>
  </tr>
  <tr>
    <td align="center"> [ &gt;&gt; ] </td>
    <td align="center">FastForward</td>
    <td>Next chapter</td>
    <td>2</td>
  </tr>
  <tr>
    <td align="center"> [Top] </td>
    <td align="center">Top</td>
    <td>Cover (top) of document</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Contents] </td>
    <td align="center">Contents</td>
    <td>Table of contents</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Index] </td>
    <td align="center">Index</td>
    <td>Index</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [ ? ] </td>
    <td align="center">About</td>
    <td>About (help)</td>
    <td> &nbsp; </td>
  </tr>
</table>

<p>
  where the <strong> Example </strong> assumes that the current position is at <strong> Subsubsection One-Two-Three </strong> of a document of the following structure:
</p>

<ul>
  <li> 1. Section One
    <ul>
      <li>1.1 Subsection One-One
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.2 Subsection One-Two
        <ul>
          <li>1.2.1 Subsubsection One-Two-One</li>
          <li>1.2.2 Subsubsection One-Two-Two</li>
          <li>1.2.3 Subsubsection One-Two-Three &nbsp; &nbsp;
            <strong>&lt;== Current Position </strong></li>
          <li>1.2.4 Subsubsection One-Two-Four</li>
        </ul>
      </li>
      <li>1.3 Subsection One-Three
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.4 Subsection One-Four</li>
    </ul>
  </li>
</ul>

<hr>
<p>
 <font size="-1">
  This document was generated on <i>August 15, 2023</i> using <a href="http://www.nongnu.org/texi2html/"><i>texi2html 5.0</i></a>.
 </font>
 <br>

</p>
</body>
</html>
